"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var te=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/errors","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/nls!vs/platform/contextkey/common/contextkey","vs/nls","vs/nls!vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/nls!vs/platform/contextkey/common/scanner","vs/platform/contextkey/common/scanner","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ne=function(ee){for(var t=[],B=0,q=ee.length;B<q;B++)t[B]=te[ee[B]];return t};define(te[13],ne([0,1]),function(ee,t){"use strict";var B,q,F;Object.defineProperty(t,"__esModule",{value:!0}),t.CounterSet=t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.setToString=t.mapToString=t.getOrSet=void 0;function N(u,s,c){let n=u.get(s);return n===void 0&&(n=c,u.set(s,n)),n}t.getOrSet=N;function M(u){const s=[];return u.forEach((c,n)=>{s.push(`${n} => ${c}`)}),`Map(${u.size}) {${s.join(", ")}}`}t.mapToString=M;function j(u){const s=[];return u.forEach(c=>{s.push(c)}),`Set(${u.size}) {${s.join(", ")}}`}t.setToString=j;class k{constructor(s,c){this.uri=s,this.value=c}}class f{constructor(s,c){this[B]="ResourceMap",s instanceof f?(this.b=new Map(s.b),this.c=c??f.a):(this.b=new Map,this.c=s??f.a)}set(s,c){return this.b.set(this.c(s),new k(s,c)),this}get(s){return this.b.get(this.c(s))?.value}has(s){return this.b.has(this.c(s))}get size(){return this.b.size}clear(){this.b.clear()}delete(s){return this.b.delete(this.c(s))}forEach(s,c){typeof c<"u"&&(s=s.bind(c));for(const[n,r]of this.b)s(r.value,r.uri,this)}*values(){for(const s of this.b.values())yield s.value}*keys(){for(const s of this.b.values())yield s.uri}*entries(){for(const s of this.b.values())yield[s.uri,s.value]}*[(B=Symbol.toStringTag,Symbol.iterator)](){for(const[,s]of this.b)yield[s.uri,s.value]}}t.ResourceMap=f,f.a=u=>u.toString();class w{constructor(s,c){this[q]="ResourceSet",!s||typeof s=="function"?this.a=new f(s):(this.a=new f(c),s.forEach(this.add,this))}get size(){return this.a.size}add(s){return this.a.set(s,s),this}clear(){this.a.clear()}delete(s){return this.a.delete(s)}forEach(s,c){this.a.forEach((n,r)=>s.call(c,r,r,this))}has(s){return this.a.has(s)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(q=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=w;var A;(function(u){u[u.None=0]="None",u[u.AsOld=1]="AsOld",u[u.AsNew=2]="AsNew"})(A||(t.Touch=A={}));class b{constructor(){this[F]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(s){return this.a.has(s)}get(s,c=0){const n=this.a.get(s);if(n)return c!==0&&this.j(n,c),n.value}set(s,c,n=0){let r=this.a.get(s);if(r)r.value=c,n!==0&&this.j(r,n);else{switch(r={key:s,value:c,next:void 0,previous:void 0},n){case 0:this.h(r);break;case 1:this.g(r);break;case 2:this.h(r);break;default:this.h(r);break}this.a.set(s,r),this.d++}return this}delete(s){return!!this.remove(s)}remove(s){const c=this.a.get(s);if(c)return this.a.delete(s),this.i(c),this.d--,c.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const s=this.b;return this.a.delete(s.key),this.i(s),this.d--,s.value}forEach(s,c){const n=this.e;let r=this.b;for(;r;){if(c?s.bind(c)(r.value,r.key,this):s(r.value,r.key,this),this.e!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const s=this,c=this.e;let n=this.b;const r={[Symbol.iterator](){return r},next(){if(s.e!==c)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){const s=this,c=this.e;let n=this.b;const r={[Symbol.iterator](){return r},next(){if(s.e!==c)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){const s=this,c=this.e;let n=this.b;const r={[Symbol.iterator](){return r},next(){if(s.e!==c)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(F=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(s){if(s>=this.size)return;if(s===0){this.clear();return}let c=this.b,n=this.size;for(;c&&n>s;)this.a.delete(c.key),c=c.next,n--;this.b=c,this.d=n,c&&(c.previous=void 0),this.e++}g(s){if(!this.b&&!this.c)this.c=s;else if(this.b)s.next=this.b,this.b.previous=s;else throw new Error("Invalid list");this.b=s,this.e++}h(s){if(!this.b&&!this.c)this.b=s;else if(this.c)s.previous=this.c,this.c.next=s;else throw new Error("Invalid list");this.c=s,this.e++}i(s){if(s===this.b&&s===this.c)this.b=void 0,this.c=void 0;else if(s===this.b){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this.b=s.next}else if(s===this.c){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this.c=s.previous}else{const c=s.next,n=s.previous;if(!c||!n)throw new Error("Invalid list");c.previous=n,n.next=c}s.next=void 0,s.previous=void 0,this.e++}j(s,c){if(!this.b||!this.c)throw new Error("Invalid list");if(!(c!==1&&c!==2)){if(c===1){if(s===this.b)return;const n=s.next,r=s.previous;s===this.c?(r.next=void 0,this.c=r):(n.previous=r,r.next=n),s.previous=void 0,s.next=this.b,this.b.previous=s,this.b=s,this.e++}else if(c===2){if(s===this.c)return;const n=s.next,r=s.previous;s===this.b?(n.previous=void 0,this.b=n):(n.previous=r,r.next=n),s.next=void 0,s.previous=this.c,this.c.next=s,this.c=s,this.e++}}}toJSON(){const s=[];return this.forEach((c,n)=>{s.push([n,c])}),s}fromJSON(s){this.clear();for(const[c,n]of s)this.set(c,n)}}t.LinkedMap=b;class R extends b{constructor(s,c=1){super(),this.k=s,this.l=Math.min(Math.max(0,c),1)}get limit(){return this.k}set limit(s){this.k=s,this.m()}get ratio(){return this.l}set ratio(s){this.l=Math.min(Math.max(0,s),1),this.m()}get(s,c=2){return super.get(s,c)}peek(s){return super.get(s,0)}set(s,c){return super.set(s,c,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}t.LRUCache=R;class p{constructor(){this.a=new Map}add(s){return this.a.set(s,(this.a.get(s)||0)+1),this}delete(s){let c=this.a.get(s)||0;return c===0?!1:(c--,c===0?this.a.delete(s):this.a.set(s,c),!0)}has(s){return this.a.has(s)}}t.CounterSet=p}),define(te[14],ne([0,1,4,7]),function(ee,t,B,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedStream=t.prefixedReadable=t.transform=t.toReadable=t.emptyStream=t.toStream=t.peekStream=t.listenStream=t.consumeStream=t.peekReadable=t.consumeReadable=t.newWriteableStream=t.isReadableBufferedStream=t.isReadableStream=t.isReadable=void 0;function F(i){const o=i;return o?typeof o.read=="function":!1}t.isReadable=F;function N(i){const o=i;return o?[o.on,o.pause,o.resume,o.destroy].every(h=>typeof h=="function"):!1}t.isReadableStream=N;function M(i){const o=i;return o?N(o.stream)&&Array.isArray(o.buffer)&&typeof o.ended=="boolean":!1}t.isReadableBufferedStream=M;function j(i,o){return new k(i,o)}t.newWriteableStream=j;class k{constructor(o,h){this.e=o,this.f=h,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(o){if(!this.a.destroyed){if(this.a.flowing)this.g(o);else if(this.b.data.push(o),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(h=>this.d.push(h))}}error(o){this.a.destroyed||(this.a.flowing?this.h(o):this.b.error.push(o))}end(o){this.a.destroyed||(typeof o<"u"&&this.write(o),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(o){this.c.data.slice(0).forEach(h=>h(o))}h(o){this.c.error.length===0?(0,B.onUnexpectedError)(o):this.c.error.slice(0).forEach(h=>h(o))}i(){this.c.end.slice(0).forEach(o=>o())}on(o,h){if(!this.a.destroyed)switch(o){case"data":this.c.data.push(h),this.resume();break;case"end":this.c.end.push(h),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(h),this.a.flowing&&this.k();break}}removeListener(o,h){if(this.a.destroyed)return;let E;switch(o){case"data":E=this.c.data;break;case"end":E=this.c.end;break;case"error":E=this.c.error;break}if(E){const v=E.indexOf(h);v>=0&&E.splice(v,1)}}j(){if(this.b.data.length>0){const o=this.e(this.b.data);this.g(o),this.b.data.length=0;const h=[...this.d];this.d.length=0,h.forEach(E=>E())}}k(){if(this.c.error.length>0){for(const o of this.b.error)this.h(o);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function f(i,o){const h=[];let E;for(;(E=i.read())!==null;)h.push(E);return o(h)}t.consumeReadable=f;function w(i,o,h){const E=[];let v;for(;(v=i.read())!==null&&E.length<h;)E.push(v);return v===null&&E.length>0?o(E):{read:()=>{if(E.length>0)return E.shift();if(typeof v<"u"){const P=v;return v=void 0,P}return i.read()}}}t.peekReadable=w;function A(i,o){return new Promise((h,E)=>{const v=[];b(i,{onData:P=>{o&&v.push(P)},onError:P=>{o?E(P):h(void 0)},onEnd:()=>{h(o?o(v):void 0)}})})}t.consumeStream=A;function b(i,o){let h=!1;return i.on("error",E=>{h||o.onError(E)}),i.on("end",()=>{h||o.onEnd()}),i.on("data",E=>{h||o.onData(E)}),(0,q.toDisposable)(()=>h=!0)}t.listenStream=b;function R(i,o){return new Promise((h,E)=>{const v=new q.DisposableStore,P=[],O=g=>{if(P.push(g),P.length>o)return v.dispose(),i.pause(),h({stream:i,buffer:P,ended:!1})},d=g=>E(g),m=()=>h({stream:i,buffer:P,ended:!0});v.add((0,q.toDisposable)(()=>i.removeListener("error",d))),i.on("error",d),v.add((0,q.toDisposable)(()=>i.removeListener("end",m))),i.on("end",m),v.add((0,q.toDisposable)(()=>i.removeListener("data",O))),i.on("data",O)})}t.peekStream=R;function p(i,o){const h=j(o);return h.end(i),h}t.toStream=p;function u(){const i=j(()=>{throw new Error("not supported")});return i.end(),i}t.emptyStream=u;function s(i){let o=!1;return{read:()=>o?null:(o=!0,i)}}t.toReadable=s;function c(i,o,h){const E=j(h);return b(i,{onData:v=>E.write(o.data(v)),onError:v=>E.error(o.error?o.error(v):v),onEnd:()=>E.end()}),E}t.transform=c;function n(i,o,h){let E=!1;return{read:()=>{const v=o.read();return E?v:(E=!0,v!==null?h([i,v]):i)}}}t.prefixedReadable=n;function r(i,o,h){let E=!1;const v=j(h);return b(o,{onData:P=>E?v.write(P):(E=!0,v.write(h([i,P]))),onError:P=>v.error(P),onEnd:()=>{E||(E=!0,v.write(i)),v.end()}}),v}t.prefixedStream=r}),define(te[6],ne([0,1,14]),function(ee,t,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=t.prefixedBufferStream=t.prefixedBufferReadable=t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.bufferedStreamToBuffer=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const q=typeof Buffer<"u";let F,N;class M{static alloc(g){return q?new M(Buffer.allocUnsafe(g)):new M(new Uint8Array(g))}static wrap(g){return q&&!Buffer.isBuffer(g)&&(g=Buffer.from(g.buffer,g.byteOffset,g.byteLength)),new M(g)}static fromString(g,C){return!(C?.dontUseNodeBuffer||!1)&&q?new M(Buffer.from(g)):(F||(F=new TextEncoder),new M(F.encode(g)))}static fromByteArray(g){const C=M.alloc(g.length);for(let W=0,$=g.length;W<$;W++)C.buffer[W]=g[W];return C}static concat(g,C){if(typeof C>"u"){C=0;for(let K=0,Z=g.length;K<Z;K++)C+=g[K].byteLength}const W=M.alloc(C);let $=0;for(let K=0,Z=g.length;K<Z;K++){const Y=g[K];W.set(Y,$),$+=Y.byteLength}return W}constructor(g){this.buffer=g,this.byteLength=this.buffer.byteLength}clone(){const g=M.alloc(this.byteLength);return g.set(this),g}toString(){return q?this.buffer.toString():(N||(N=new TextDecoder),N.decode(this.buffer))}slice(g,C){return new M(this.buffer.subarray(g,C))}set(g,C){if(g instanceof M)this.buffer.set(g.buffer,C);else if(g instanceof Uint8Array)this.buffer.set(g,C);else if(g instanceof ArrayBuffer)this.buffer.set(new Uint8Array(g),C);else if(ArrayBuffer.isView(g))this.buffer.set(new Uint8Array(g.buffer,g.byteOffset,g.byteLength),C);else throw new Error("Unknown argument 'array'")}readUInt32BE(g){return f(this.buffer,g)}writeUInt32BE(g,C){w(this.buffer,g,C)}readUInt32LE(g){return A(this.buffer,g)}writeUInt32LE(g,C){b(this.buffer,g,C)}readUInt8(g){return R(this.buffer,g)}writeUInt8(g,C){p(this.buffer,g,C)}}t.VSBuffer=M;function j(m,g){return m[g+0]<<0>>>0|m[g+1]<<8>>>0}t.readUInt16LE=j;function k(m,g,C){m[C+0]=g&255,g=g>>>8,m[C+1]=g&255}t.writeUInt16LE=k;function f(m,g){return m[g]*2**24+m[g+1]*2**16+m[g+2]*2**8+m[g+3]}t.readUInt32BE=f;function w(m,g,C){m[C+3]=g,g=g>>>8,m[C+2]=g,g=g>>>8,m[C+1]=g,g=g>>>8,m[C]=g}t.writeUInt32BE=w;function A(m,g){return m[g+0]<<0>>>0|m[g+1]<<8>>>0|m[g+2]<<16>>>0|m[g+3]<<24>>>0}t.readUInt32LE=A;function b(m,g,C){m[C+0]=g&255,g=g>>>8,m[C+1]=g&255,g=g>>>8,m[C+2]=g&255,g=g>>>8,m[C+3]=g&255}t.writeUInt32LE=b;function R(m,g){return m[g]}t.readUInt8=R;function p(m,g,C){m[C]=g}t.writeUInt8=p;function u(m){return B.consumeReadable(m,g=>M.concat(g))}t.readableToBuffer=u;function s(m){return B.toReadable(m)}t.bufferToReadable=s;function c(m){return B.consumeStream(m,g=>M.concat(g))}t.streamToBuffer=c;async function n(m){return m.ended?M.concat(m.buffer):M.concat([...m.buffer,await c(m.stream)])}t.bufferedStreamToBuffer=n;function r(m){return B.toStream(m,g=>M.concat(g))}t.bufferToStream=r;function i(m){return B.transform(m,{data:g=>typeof g=="string"?M.fromString(g):M.wrap(g)},g=>M.concat(g))}t.streamToBufferReadableStream=i;function o(m){return B.newWriteableStream(g=>M.concat(g),m)}t.newWriteableBufferStream=o;function h(m,g){return B.prefixedReadable(m,g,C=>M.concat(C))}t.prefixedBufferReadable=h;function E(m,g){return B.prefixedStream(m,g,C=>M.concat(C))}t.prefixedBufferStream=E;function v(m){let g=0,C=0,W=0;const $=new Uint8Array(Math.floor(m.length/4*3)),K=Y=>{switch(C){case 3:$[W++]=g|Y,C=0;break;case 2:$[W++]=g|Y>>>2,g=Y<<6,C=3;break;case 1:$[W++]=g|Y>>>4,g=Y<<4,C=2;break;default:g=Y<<2,C=1}};for(let Y=0;Y<m.length;Y++){const J=m.charCodeAt(Y);if(J>=65&&J<=90)K(J-65);else if(J>=97&&J<=122)K(J-97+26);else if(J>=48&&J<=57)K(J-48+52);else if(J===43||J===45)K(62);else if(J===47||J===95)K(63);else{if(J===61)break;throw new SyntaxError(`Unexpected base64 character ${m[Y]}`)}}const Z=W;for(;C>0;)K(0);return M.wrap($).slice(0,Z)}t.decodeBase64=v;const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function d({buffer:m},g=!0,C=!1){const W=C?O:P;let $="";const K=m.byteLength%3;let Z=0;for(;Z<m.byteLength-K;Z+=3){const Y=m[Z+0],J=m[Z+1],ie=m[Z+2];$+=W[Y>>>2],$+=W[(Y<<4|J>>>4)&63],$+=W[(J<<2|ie>>>6)&63],$+=W[ie&63]}if(K===1){const Y=m[Z+0];$+=W[Y>>>2],$+=W[Y<<4&63],g&&($+="==")}else if(K===2){const Y=m[Z+0],J=m[Z+1];$+=W[Y>>>2],$+=W[(Y<<4|J>>>4)&63],$+=W[J<<2&63],g&&($+="=")}return $}t.encodeBase64=d}),define(te[15],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicrotaskDelay=void 0,t.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(te[16],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countEOL=t.StringEOL=void 0;var B;(function(F){F[F.Unknown=0]="Unknown",F[F.Invalid=3]="Invalid",F[F.LF=1]="LF",F[F.CRLF=2]="CRLF"})(B||(t.StringEOL=B={}));function q(F){let N=0,M=0,j=0,k=0;for(let f=0,w=F.length;f<w;f++){const A=F.charCodeAt(f);A===13?(N===0&&(M=f),N++,f+1<w&&F.charCodeAt(f+1)===10?(k|=2,f++):k|=3,j=f+1):A===10&&(k|=1,N===0&&(M=f),N++,j=f+1)}return N===0&&(M=F.length),[N,M,F.length-j,k]}t.countEOL=q}),define(te[17],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recomputeTreeMetadata=t.updateTreeMetadata=t.fixInsert=t.rbDelete=t.rightRotate=t.leftRotate=t.righttest=t.leftest=t.SENTINEL=t.NodeColor=t.TreeNode=void 0;class B{constructor(s,c){this.piece=s,this.color=c,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==t.SENTINEL)return F(this.right);let s=this;for(;s.parent!==t.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===t.SENTINEL?t.SENTINEL:s.parent}prev(){if(this.left!==t.SENTINEL)return N(this.left);let s=this;for(;s.parent!==t.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===t.SENTINEL?t.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}t.TreeNode=B;var q;(function(u){u[u.Black=0]="Black",u[u.Red=1]="Red"})(q||(t.NodeColor=q={})),t.SENTINEL=new B(null,0),t.SENTINEL.parent=t.SENTINEL,t.SENTINEL.left=t.SENTINEL,t.SENTINEL.right=t.SENTINEL,t.SENTINEL.color=0;function F(u){for(;u.left!==t.SENTINEL;)u=u.left;return u}t.leftest=F;function N(u){for(;u.right!==t.SENTINEL;)u=u.right;return u}t.righttest=N;function M(u){return u===t.SENTINEL?0:u.size_left+u.piece.length+M(u.right)}function j(u){return u===t.SENTINEL?0:u.lf_left+u.piece.lineFeedCnt+j(u.right)}function k(){t.SENTINEL.parent=t.SENTINEL}function f(u,s){const c=s.right;c.size_left+=s.size_left+(s.piece?s.piece.length:0),c.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=c.left,c.left!==t.SENTINEL&&(c.left.parent=s),c.parent=s.parent,s.parent===t.SENTINEL?u.root=c:s.parent.left===s?s.parent.left=c:s.parent.right=c,c.left=s,s.parent=c}t.leftRotate=f;function w(u,s){const c=s.left;s.left=c.right,c.right!==t.SENTINEL&&(c.right.parent=s),c.parent=s.parent,s.size_left-=c.size_left+(c.piece?c.piece.length:0),s.lf_left-=c.lf_left+(c.piece?c.piece.lineFeedCnt:0),s.parent===t.SENTINEL?u.root=c:s===s.parent.right?s.parent.right=c:s.parent.left=c,c.right=s,s.parent=c}t.rightRotate=w;function A(u,s){let c,n;if(s.left===t.SENTINEL?(n=s,c=n.right):s.right===t.SENTINEL?(n=s,c=n.left):(n=F(s.right),c=n.right),n===u.root){u.root=c,c.color=0,s.detach(),k(),u.root.parent=t.SENTINEL;return}const r=n.color===1;if(n===n.parent.left?n.parent.left=c:n.parent.right=c,n===s?(c.parent=n.parent,p(u,c)):(n.parent===s?c.parent=n:c.parent=n.parent,p(u,c),n.left=s.left,n.right=s.right,n.parent=s.parent,n.color=s.color,s===u.root?u.root=n:s===s.parent.left?s.parent.left=n:s.parent.right=n,n.left!==t.SENTINEL&&(n.left.parent=n),n.right!==t.SENTINEL&&(n.right.parent=n),n.size_left=s.size_left,n.lf_left=s.lf_left,p(u,n)),s.detach(),c.parent.left===c){const o=M(c),h=j(c);if(o!==c.parent.size_left||h!==c.parent.lf_left){const E=o-c.parent.size_left,v=h-c.parent.lf_left;c.parent.size_left=o,c.parent.lf_left=h,R(u,c.parent,E,v)}}if(p(u,c.parent),r){k();return}let i;for(;c!==u.root&&c.color===0;)c===c.parent.left?(i=c.parent.right,i.color===1&&(i.color=0,c.parent.color=1,f(u,c.parent),i=c.parent.right),i.left.color===0&&i.right.color===0?(i.color=1,c=c.parent):(i.right.color===0&&(i.left.color=0,i.color=1,w(u,i),i=c.parent.right),i.color=c.parent.color,c.parent.color=0,i.right.color=0,f(u,c.parent),c=u.root)):(i=c.parent.left,i.color===1&&(i.color=0,c.parent.color=1,w(u,c.parent),i=c.parent.left),i.left.color===0&&i.right.color===0?(i.color=1,c=c.parent):(i.left.color===0&&(i.right.color=0,i.color=1,f(u,i),i=c.parent.left),i.color=c.parent.color,c.parent.color=0,i.left.color=0,w(u,c.parent),c=u.root));c.color=0,k()}t.rbDelete=A;function b(u,s){for(p(u,s);s!==u.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const c=s.parent.parent.right;c.color===1?(s.parent.color=0,c.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,f(u,s)),s.parent.color=0,s.parent.parent.color=1,w(u,s.parent.parent))}else{const c=s.parent.parent.left;c.color===1?(s.parent.color=0,c.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,w(u,s)),s.parent.color=0,s.parent.parent.color=1,f(u,s.parent.parent))}u.root.color=0}t.fixInsert=b;function R(u,s,c,n){for(;s!==u.root&&s!==t.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=c,s.parent.lf_left+=n),s=s.parent}t.updateTreeMetadata=R;function p(u,s){let c=0,n=0;if(s!==u.root){for(;s!==u.root&&s===s.parent.right;)s=s.parent;if(s!==u.root)for(s=s.parent,c=M(s.left)-s.size_left,n=j(s.left)-s.lf_left,s.size_left+=c,s.lf_left+=n;s!==u.root&&(c!==0||n!==0);)s.parent.left===s&&(s.parent.size_left+=c,s.parent.lf_left+=n),s=s.parent}}t.recomputeTreeMetadata=p}),define(te[18],ne([0,1,5]),function(ee,t,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMimeType=t.getExtensionForMimeType=t.getMediaMime=t.getMediaOrTextMime=t.Mimes=void 0,t.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const q={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},F={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function N(w){const A=(0,B.extname)(w),b=q[A.toLowerCase()];return b!==void 0?b:M(w)}t.getMediaOrTextMime=N;function M(w){const A=(0,B.extname)(w);return F[A.toLowerCase()]}t.getMediaMime=M;function j(w){for(const A in F)if(F[A]===w)return A}t.getExtensionForMimeType=j;const k=/^(.+)\/(.+?)(;.+)?$/;function f(w,A){const b=k.exec(w);return b?`${b[1].toLowerCase()}/${b[2].toLowerCase()}${b[3]??""}`:A?void 0:w}t.normalizeMimeType=f}),define(te[8],ne([0,1,5,2,3,36]),function(ee,t,B,q,F,N){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function M(d){return d===47||d===92}t.isPathSeparator=M;function j(d){return d.replace(/[\\/]/g,B.posix.sep)}t.toSlashes=j;function k(d){return d.indexOf("/")===-1&&(d=j(d)),/^[a-zA-Z]:(\/|$)/.test(d)&&(d="/"+d),d}t.toPosixPath=k;function f(d,m=B.posix.sep){if(!d)return"";const g=d.length,C=d.charCodeAt(0);if(M(C)){if(M(d.charCodeAt(1))&&!M(d.charCodeAt(2))){let $=3;const K=$;for(;$<g&&!M(d.charCodeAt($));$++);if(K!==$&&!M(d.charCodeAt($+1))){for($+=1;$<g;$++)if(M(d.charCodeAt($)))return d.slice(0,$+1).replace(/[\\/]/g,m)}}return m}else if(c(C)&&d.charCodeAt(1)===58)return M(d.charCodeAt(2))?d.slice(0,2)+m:d.slice(0,2);let W=d.indexOf("://");if(W!==-1){for(W+=3;W<g;W++)if(M(d.charCodeAt(W)))return d.slice(0,W+1)}return""}t.getRoot=f;function w(d){if(!q.isWindows||!d||d.length<5)return!1;let m=d.charCodeAt(0);if(m!==92||(m=d.charCodeAt(1),m!==92))return!1;let g=2;const C=g;for(;g<d.length&&(m=d.charCodeAt(g),m!==92);g++);return!(C===g||(m=d.charCodeAt(g+1),isNaN(m)||m===92))}t.isUNC=w;const A=/[\\/:\*\?"<>\|]/g,b=/[\\/]/g,R=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function p(d,m=q.isWindows){const g=m?A:b;return!(!d||d.length===0||/^\s+$/.test(d)||(g.lastIndex=0,g.test(d))||m&&R.test(d)||d==="."||d===".."||m&&d[d.length-1]==="."||m&&d.length!==d.trim().length||d.length>255)}t.isValidBasename=p;function u(d,m,g){const C=d===m;return!g||C?C:!d||!m?!1:(0,F.equalsIgnoreCase)(d,m)}t.isEqual=u;function s(d,m,g,C=B.sep){if(d===m)return!0;if(!d||!m||m.length>d.length)return!1;if(g){if(!(0,F.startsWithIgnoreCase)(d,m))return!1;if(m.length===d.length)return!0;let $=m.length;return m.charAt(m.length-1)===C&&$--,d.charAt($)===C}return m.charAt(m.length-1)!==C&&(m+=C),d.indexOf(m)===0}t.isEqualOrParent=s;function c(d){return d>=65&&d<=90||d>=97&&d<=122}t.isWindowsDriveLetter=c;function n(d,m){return q.isWindows&&d.endsWith(":")&&(d+=B.sep),(0,B.isAbsolute)(d)||(d=(0,B.join)(m,d)),d=(0,B.normalize)(d),q.isWindows?(d=(0,F.rtrim)(d,B.sep),d.endsWith(":")&&(d+=B.sep)):(d=(0,F.rtrim)(d,B.sep),d||(d=B.sep)),d}t.sanitizeFilePath=n;function r(d){const m=(0,B.normalize)(d);return q.isWindows?d.length>3?!1:i(m)&&(d.length===2||m.charCodeAt(2)===92):m===B.posix.sep}t.isRootOrDriveLetter=r;function i(d,m=q.isWindows){return m?c(d.charCodeAt(0))&&d.charCodeAt(1)===58:!1}t.hasDriveLetter=i;function o(d){return i(d)?d[0]:void 0}t.getDriveLetter=o;function h(d,m,g){return m.length>d.length?-1:d===m?0:(g&&(d=d.toLowerCase(),m=m.toLowerCase()),d.indexOf(m))}t.indexOfPath=h;function E(d){const m=d.split(":");let g,C,W;for(const $ of m){const K=Number($);(0,N.isNumber)(K)?C===void 0?C=K:W===void 0&&(W=K):g=g?[g,$].join(":"):$}if(!g)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:g,line:C!==void 0?C:void 0,column:W!==void 0?W:C!==void 0?1:void 0}}t.parseLineAndColumnAware=E;const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",P="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function O(d,m,g=8){let C="";for(let $=0;$<g;$++){let K;$===0&&q.isWindows&&!m&&(g===3||g===4)?K=P:K=v,C+=K.charAt(Math.floor(Math.random()*K.length))}let W;return m?W=`${m}-${C}`:W=C,d?(0,B.join)(d,W):W}t.randomPath=O}),define(te[9],ne([0,1,4,2,10]),function(ee,t,B,q,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COI=t.FileAccess=t.nodeModulesAsarUnpackedPath=t.nodeModulesAsarPath=t.nodeModulesPath=t.builtinExtensionsPath=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var N;(function(f){f.inMemory="inmemory",f.vscode="vscode",f.internal="private",f.walkThrough="walkThrough",f.walkThroughSnippet="walkThroughSnippet",f.http="http",f.https="https",f.file="file",f.mailto="mailto",f.untitled="untitled",f.data="data",f.command="command",f.vscodeRemote="vscode-remote",f.vscodeRemoteResource="vscode-remote-resource",f.vscodeUserData="vscode-userdata",f.vscodeCustomEditor="vscode-custom-editor",f.vscodeNotebookCell="vscode-notebook-cell",f.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",f.vscodeNotebookCellOutput="vscode-notebook-cell-output",f.vscodeInteractive="vscode-interactive",f.vscodeInteractiveInput="vscode-interactive-input",f.vscodeSettings="vscode-settings",f.vscodeWorkspaceTrust="vscode-workspace-trust",f.vscodeTerminal="vscode-terminal",f.vscodeInteractiveSesssion="vscode-chat-editor",f.webviewPanel="webview-panel",f.vscodeWebview="vscode-webview",f.extension="extension",f.vscodeFileResource="vscode-file",f.tmp="tmp",f.vsls="vsls",f.vscodeSourceControl="vscode-scm"})(N||(t.Schemas=N={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class M{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${N.vscodeRemoteResource}`}setPreferredWebSchema(w){this.d=w}setDelegate(w){this.e=w}setServerRootPath(w){this.f=`${w}/${N.vscodeRemoteResource}`}set(w,A,b){this.a[w]=A,this.b[w]=b}setConnectionToken(w,A){this.c[w]=A}getPreferredWebSchema(){return this.d}rewrite(w){if(this.e)try{return this.e(w)}catch(s){return B.onUnexpectedError(s),w}const A=w.authority;let b=this.a[A];b&&b.indexOf(":")!==-1&&b.indexOf("[")===-1&&(b=`[${b}]`);const R=this.b[A],p=this.c[A];let u=`path=${encodeURIComponent(w.path)}`;return typeof p=="string"&&(u+=`&${t.connectionTokenQueryName}=${encodeURIComponent(p)}`),F.URI.from({scheme:q.isWeb?this.d:N.vscodeRemoteResource,authority:`${b}:${R}`,path:this.f,query:u})}}t.RemoteAuthorities=new M,t.builtinExtensionsPath="vs/../../extensions",t.nodeModulesPath="vs/../../node_modules",t.nodeModulesAsarPath="vs/../../node_modules.asar",t.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class j{asBrowserUri(w){const A=this.b(w,ee);return this.uriToBrowserUri(A)}uriToBrowserUri(w){return w.scheme===N.vscodeRemote?t.RemoteAuthorities.rewrite(w):w.scheme===N.file&&(q.isNative||q.isWebWorker&&q.globals.origin===`${N.vscodeFileResource}://${j.a}`)?w.with({scheme:N.vscodeFileResource,authority:w.authority||j.a,query:null,fragment:null}):w}asFileUri(w){const A=this.b(w,ee);return this.uriToFileUri(A)}uriToFileUri(w){return w.scheme===N.vscodeFileResource?w.with({scheme:N.file,authority:w.authority!==j.a?w.authority:null,query:null,fragment:null}):w}b(w,A){return F.URI.isUri(w)?w:F.URI.parse(A.toUrl(w))}}j.a="vscode-app",t.FileAccess=new j;var k;(function(f){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);f.CoopAndCoep=Object.freeze(w.get("3"));const A="vscode-coi";function b(p){let u;typeof p=="string"?u=new URL(p).searchParams:p instanceof URL?u=p.searchParams:F.URI.isUri(p)&&(u=new URL(p.toString(!0)).searchParams);const s=u?.get(A);if(s)return w.get(s)}f.getHeadersFromQuery=b;function R(p,u,s){if(!globalThis.crossOriginIsolated)return;const c=u&&s?"3":s?"2":"1";p instanceof URLSearchParams?p.set(A,c):p[A]=c}f.addSearchParam=R})(k||(t.COI=k={}))}),define(te[19],ne([0,1,8,9,5,2,3,10]),function(ee,t,B,q,F,N,M,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function k(R){return(0,j.uriToFsPath)(R,!0)}t.originalFSPath=k;class f{constructor(p){this.a=p}compare(p,u,s=!1){return p===u?0:(0,M.compare)(this.getComparisonKey(p,s),this.getComparisonKey(u,s))}isEqual(p,u,s=!1){return p===u?!0:!p||!u?!1:this.getComparisonKey(p,s)===this.getComparisonKey(u,s)}getComparisonKey(p,u=!1){return p.with({path:this.a(p)?p.path.toLowerCase():void 0,fragment:u?null:void 0}).toString()}ignorePathCasing(p){return this.a(p)}isEqualOrParent(p,u,s=!1){if(p.scheme===u.scheme){if(p.scheme===q.Schemas.file)return B.isEqualOrParent(k(p),k(u),this.a(p))&&p.query===u.query&&(s||p.fragment===u.fragment);if((0,t.isEqualAuthority)(p.authority,u.authority))return B.isEqualOrParent(p.path,u.path,this.a(p),"/")&&p.query===u.query&&(s||p.fragment===u.fragment)}return!1}joinPath(p,...u){return j.URI.joinPath(p,...u)}basenameOrAuthority(p){return(0,t.basename)(p)||p.authority}basename(p){return F.posix.basename(p.path)}extname(p){return F.posix.extname(p.path)}dirname(p){if(p.path.length===0)return p;let u;return p.scheme===q.Schemas.file?u=j.URI.file(F.dirname(k(p))).path:(u=F.posix.dirname(p.path),p.authority&&u.length&&u.charCodeAt(0)!==47&&(console.error(`dirname("${p.toString})) resulted in a relative path`),u="/")),p.with({path:u})}normalizePath(p){if(!p.path.length)return p;let u;return p.scheme===q.Schemas.file?u=j.URI.file(F.normalize(k(p))).path:u=F.posix.normalize(p.path),p.with({path:u})}relativePath(p,u){if(p.scheme!==u.scheme||!(0,t.isEqualAuthority)(p.authority,u.authority))return;if(p.scheme===q.Schemas.file){const n=F.relative(k(p),k(u));return N.isWindows?B.toSlashes(n):n}let s=p.path||"/";const c=u.path||"/";if(this.a(p)){let n=0;for(const r=Math.min(s.length,c.length);n<r&&!(s.charCodeAt(n)!==c.charCodeAt(n)&&s.charAt(n).toLowerCase()!==c.charAt(n).toLowerCase());n++);s=c.substr(0,n)+s.substr(n)}return F.posix.relative(s,c)}resolvePath(p,u){if(p.scheme===q.Schemas.file){const s=j.URI.file(F.resolve(k(p),u));return p.with({authority:s.authority,path:s.path})}return u=B.toPosixPath(u),p.with({path:F.posix.resolve(p.path,u)})}isAbsolutePath(p){return!!p.path&&p.path[0]==="/"}isEqualAuthority(p,u){return p===u||p!==void 0&&u!==void 0&&(0,M.equalsIgnoreCase)(p,u)}hasTrailingPathSeparator(p,u=F.sep){if(p.scheme===q.Schemas.file){const s=k(p);return s.length>B.getRoot(s).length&&s[s.length-1]===u}else{const s=p.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(p.fsPath)}}removeTrailingPathSeparator(p,u=F.sep){return(0,t.hasTrailingPathSeparator)(p,u)?p.with({path:p.path.substr(0,p.path.length-1)}):p}addTrailingPathSeparator(p,u=F.sep){let s=!1;if(p.scheme===q.Schemas.file){const c=k(p);s=c!==void 0&&c.length===B.getRoot(c).length&&c[c.length-1]===u}else{u="/";const c=p.path;s=c.length===1&&c.charCodeAt(c.length-1)===47}return!s&&!(0,t.hasTrailingPathSeparator)(p,u)?p.with({path:p.path+"/"}):p}}t.ExtUri=f,t.extUri=new f(()=>!1),t.extUriBiasedIgnorePathCase=new f(R=>R.scheme===q.Schemas.file?!N.isLinux:!0),t.extUriIgnorePathCase=new f(R=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function w(R,p){const u=[];for(let s=0;s<R.length;s++){const c=p(R[s]);R.some((n,r)=>r===s?!1:(0,t.isEqualOrParent)(c,p(n)))||u.push(R[s])}return u}t.distinctParents=w;var A;(function(R){R.META_DATA_LABEL="label",R.META_DATA_DESCRIPTION="description",R.META_DATA_SIZE="size",R.META_DATA_MIME="mime";function p(u){const s=new Map;u.path.substring(u.path.indexOf(";")+1,u.path.lastIndexOf(";")).split(";").forEach(r=>{const[i,o]=r.split(":");i&&o&&s.set(i,o)});const n=u.path.substring(0,u.path.indexOf(";"));return n&&s.set(R.META_DATA_MIME,n),s}R.parseMetaData=p})(A||(t.DataUri=A={}));function b(R,p,u){if(p){let s=R.path;return s&&s[0]!==F.posix.sep&&(s=F.posix.sep+s),R.with({scheme:u,authority:p,path:s})}return R.with({scheme:u})}t.toLocalResource=b}),define(te[20],ne([0,1,37,4,21,7,19,2,15]),function(ee,t,B,q,F,N,M,j,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function f(y){return!!y&&typeof y.then=="function"}t.isThenable=f;function w(y){const l=new B.CancellationTokenSource,e=y(l.token),a=new Promise((S,L)=>{const x=l.token.onCancellationRequested(()=>{x.dispose(),l.dispose(),L(new q.CancellationError)});Promise.resolve(e).then(V=>{x.dispose(),l.dispose(),S(V)},V=>{x.dispose(),l.dispose(),L(V)})});return new class{cancel(){l.cancel()}then(S,L){return a.then(S,L)}catch(S){return this.then(void 0,S)}finally(S){return a.finally(S)}}}t.createCancelablePromise=w;function A(y,l,e){return new Promise((a,S)=>{const L=l.onCancellationRequested(()=>{L.dispose(),a(e)});y.then(a,S).finally(()=>L.dispose())})}t.raceCancellation=A;function b(y,l){return new Promise((e,a)=>{const S=l.onCancellationRequested(()=>{S.dispose(),a(new q.CancellationError)});y.then(e,a).finally(()=>S.dispose())})}t.raceCancellationError=b;async function R(y){let l=-1;const e=y.map((a,S)=>a.then(L=>(l=S,L)));try{return await Promise.race(e)}finally{y.forEach((a,S)=>{S!==l&&a.cancel()})}}t.raceCancellablePromises=R;function p(y,l,e){let a;const S=setTimeout(()=>{a?.(void 0),e?.()},l);return Promise.race([y.finally(()=>clearTimeout(S)),new Promise(L=>a=L)])}t.raceTimeout=p;function u(y){return new Promise((l,e)=>{const a=y();f(a)?a.then(l,e):l(a)})}t.asPromise=u;class s{constructor(){this.a=null,this.b=null,this.d=null}queue(l){if(this.a){if(this.d=l,!this.b){const e=()=>{this.b=null;const a=this.queue(this.d);return this.d=null,a};this.b=new Promise(a=>{this.a.then(e,e).then(a)})}return new Promise((e,a)=>{this.b.then(e,a)})}return this.a=l(),new Promise((e,a)=>{this.a.then(S=>{this.a=null,e(S)},S=>{this.a=null,a(S)})})}}t.Throttler=s;class c{constructor(){this.a=Promise.resolve(null)}queue(l){return this.a=this.a.then(()=>l(),()=>l())}}t.Sequencer=c;class n{constructor(){this.a=new Map}queue(l,e){const S=(this.a.get(l)??Promise.resolve()).catch(()=>{}).then(e).finally(()=>{this.a.get(l)===S&&this.a.delete(l)});return this.a.set(l,S),S}}t.SequencerByKey=n;const r=(y,l)=>{let e=!0;const a=setTimeout(()=>{e=!1,l()},y);return{isTriggered:()=>e,dispose:()=>{clearTimeout(a),e=!1}}},i=y=>{let l=!0;return queueMicrotask(()=>{l&&(l=!1,y())}),{isTriggered:()=>l,dispose:()=>{l=!1}}};class o{constructor(l){this.defaultDelay=l,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(l,e=this.defaultDelay){this.g=l,this.h(),this.b||(this.b=new Promise((S,L)=>{this.d=S,this.f=L}).then(()=>{if(this.b=null,this.d=null,this.g){const S=this.g;return this.g=null,S()}}));const a=()=>{this.a=null,this.d?.(null)};return this.a=e===k.MicrotaskDelay?i(a):r(e,a),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new q.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}t.Delayer=o;class h{constructor(l){this.a=new o(l),this.b=new s}trigger(l,e){return this.a.trigger(()=>this.b.queue(l),e)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}t.ThrottledDelayer=h;class E{constructor(){this.a=!1,this.b=new Promise((l,e)=>{this.d=l})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}t.Barrier=E;class v extends E{constructor(l){super(),this.f=setTimeout(()=>this.open(),l)}open(){clearTimeout(this.f),super.open()}}t.AutoOpenBarrier=v;function P(y,l){return l?new Promise((e,a)=>{const S=setTimeout(()=>{L.dispose(),e()},y),L=l.onCancellationRequested(()=>{clearTimeout(S),L.dispose(),a(new q.CancellationError)})}):w(e=>P(y,e))}t.timeout=P;function O(y,l=0){const e=setTimeout(y,l);return(0,N.toDisposable)(()=>clearTimeout(e))}t.disposableTimeout=O;function d(y){const l=[];let e=0;const a=y.length;function S(){return e<a?y[e++]():null}function L(x){x!=null&&l.push(x);const V=S();return V?V.then(L):Promise.resolve(l)}return Promise.resolve(null).then(L)}t.sequence=d;function m(y,l=a=>!!a,e=null){let a=0;const S=y.length,L=()=>{if(a>=S)return Promise.resolve(e);const x=y[a++];return Promise.resolve(x()).then(X=>l(X)?Promise.resolve(X):L())};return L()}t.first=m;function g(y,l=a=>!!a,e=null){if(y.length===0)return Promise.resolve(e);let a=y.length;const S=()=>{a=-1;for(const L of y)L.cancel?.()};return new Promise((L,x)=>{for(const V of y)V.then(X=>{--a>=0&&l(X)?(S(),L(X)):a===0&&L(e)}).catch(X=>{--a>=0&&(S(),x(X))})})}t.firstParallel=g;class C{constructor(l){this.a=0,this.d=l,this.f=[],this.b=0,this.g=new F.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(l){return this.a++,new Promise((e,a)=>{this.f.push({factory:l,c:e,e:a}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const l=this.f.shift();this.b++;const e=l.factory();e.then(l.c,l.e),e.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}t.Limiter=C;class W extends C{constructor(){super(1)}}t.Queue=W;class ${constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const l=new U;return this.b.add(l),l.p}d(){for(const[,l]of this.a)if(l.size>0)return!1;return!0}queueFor(l,e=M.extUri){const a=e.getComparisonKey(l);let S=this.a.get(a);return S||(S=new W,F.Event.once(S.onDrained)(()=>{S?.dispose(),this.a.delete(a),this.f()}),this.a.set(a,S)),S}f(){this.d()&&this.g()}g(){for(const l of this.b)l.complete();this.b.clear()}dispose(){for(const[,l]of this.a)l.dispose();this.a.clear(),this.g()}}t.ResourceQueue=$;class K{constructor(l,e){this.a=-1,typeof l=="function"&&typeof e=="number"&&this.setIfNotSet(l,e)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(l,e){this.cancel(),this.a=setTimeout(()=>{this.a=-1,l()},e)}setIfNotSet(l,e){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,l()},e))}}t.TimeoutTimer=K;class Z{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(l,e){this.cancel(),this.a=setInterval(()=>{l()},e)}}t.IntervalTimer=Z;class Y{constructor(l,e){this.b=-1,this.a=l,this.d=e,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(l=this.d){this.cancel(),this.b=setTimeout(this.f,l)}get delay(){return this.d}set delay(l){this.d=l}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}t.RunOnceScheduler=Y;class J{constructor(l,e){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.a=l,this.b=e,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(l=this.b){l%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${l}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(l/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}t.ProcessTimeRunOnceScheduler=J;class ie extends Y{constructor(l,e){super(l,e),this.j=[]}work(l){this.j.push(l),this.isScheduled()||this.schedule()}h(){const l=this.j;this.j=[],this.a?.(l)}dispose(){this.j=[],super.dispose()}}t.RunOnceWorker=ie;class re extends N.Disposable{constructor(l,e){super(),this.g=l,this.h=e,this.a=[],this.b=this.B(new N.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(l){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+l.length>this.g.maxBufferedWork)return!1}else if(this.pending+l.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const e of l)this.a.push(e);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new Y(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}t.ThrottledWorker=re,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=y=>{(0,j.setTimeout0)(()=>{if(l)return;const e=Date.now()+15;y(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,e-Date.now())}}))});let l=!1;return{dispose(){l||(l=!0)}}}:t.runWhenIdle=(y,l)=>{const e=requestIdleCallback(y,typeof l=="number"?{timeout:l}:void 0);let a=!1;return{dispose(){a||(a=!0,cancelIdleCallback(e))}}}}();class ae{constructor(l){this.d=!1,this.a=()=>{try{this.f=l()}catch(e){this.g=e}finally{this.d=!0}},this.b=(0,t.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}t.IdleValue=ae;async function I(y,l,e){let a;for(let S=0;S<e;S++)try{return await y()}catch(L){a=L,await P(l)}throw a}t.retry=I;class H{hasPending(l){return this.a?typeof l=="number"?this.a.taskId===l:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(l,e,a){return this.a={taskId:l,cancel:()=>a?.(),promise:e},e.then(()=>this.d(l),()=>this.d(l)),e}d(l){this.a&&l===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const l=this.b;this.b=void 0,l.run().then(l.promiseResolve,l.promiseReject)}}setNext(l){if(this.b)this.b.run=l;else{let e,a;const S=new Promise((L,x)=>{e=L,a=x});this.b={run:l,promise:S,promiseResolve:e,promiseReject:a}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}t.TaskSequentializer=H;class D{constructor(l,e=()=>Date.now()){this.d=l,this.f=e,this.a=0,this.b=0}increment(){const l=this.f();return l-this.a>this.d&&(this.a=l,this.b=0),this.b++,this.b}}t.IntervalCounter=D;class U{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((l,e)=>{this.a=l,this.b=e})}complete(l){return new Promise(e=>{this.a(l),this.f=!0,e()})}error(l){return new Promise(e=>{this.b(l),this.d=!0,e()})}cancel(){new Promise(l=>{this.b(new q.CancellationError),this.d=!0,l()})}}t.DeferredPromise=U;var T;(function(y){async function l(a){let S;const L=await Promise.all(a.map(x=>x.then(V=>V,V=>{S||(S=V)})));if(typeof S<"u")throw S;return L}y.settled=l;function e(a){return new Promise(async(S,L)=>{try{await a(S,L)}catch(x){L(x)}})}y.withAsyncBody=e})(T||(t.Promises=T={}));var G;(function(y){y[y.Initial=0]="Initial",y[y.DoneOK=1]="DoneOK",y[y.DoneError=2]="DoneError"})(G||(G={}));class z{static fromArray(l){return new z(e=>{e.emitMany(l)})}static fromPromise(l){return new z(async e=>{e.emitMany(await l)})}static fromPromises(l){return new z(async e=>{await Promise.all(l.map(async a=>e.emitOne(await a)))})}static merge(l){return new z(async e=>{await Promise.all(l.map(async a=>{for await(const S of a)e.emitOne(S)}))})}constructor(l){this.a=0,this.b=[],this.d=null,this.f=new F.Emitter,queueMicrotask(async()=>{const e={emitOne:a=>this.g(a),emitMany:a=>this.h(a),reject:a=>this.k(a)};try{await Promise.resolve(l(e)),this.j()}catch(a){this.k(a)}finally{e.emitOne=void 0,e.emitMany=void 0,e.reject=void 0}})}[Symbol.asyncIterator](){let l=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(l<this.b.length)return{done:!1,value:this.b[l++]};if(this.a===1)return{done:!0,value:void 0};await F.Event.toPromise(this.f.event)}while(!0)}}}static map(l,e){return new z(async a=>{for await(const S of l)a.emitOne(e(S))})}map(l){return z.map(this,l)}static filter(l,e){return new z(async a=>{for await(const S of l)e(S)&&a.emitOne(S)})}filter(l){return z.filter(this,l)}static coalesce(l){return z.filter(l,e=>!!e)}coalesce(){return z.coalesce(this)}static async toPromise(l){const e=[];for await(const a of l)e.push(a);return e}toPromise(){return z.toPromise(this)}g(l){this.a===0&&(this.b.push(l),this.f.fire())}h(l){this.a===0&&(this.b=this.b.concat(l),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(l){this.a===0&&(this.a=2,this.d=l,this.f.fire())}}t.AsyncIterableObject=z,z.EMPTY=z.fromArray([]);class Q extends z{constructor(l,e){super(e),this.l=l}cancel(){this.l.cancel()}}t.CancelableAsyncIterableObject=Q;function _(y){const l=new B.CancellationTokenSource,e=y(l.token);return new Q(l,async a=>{const S=l.token.onCancellationRequested(()=>{S.dispose(),l.dispose(),a.reject(new q.CancellationError)});try{for await(const L of e){if(l.token.isCancellationRequested)return;a.emitOne(L)}S.dispose(),l.dispose()}catch(L){S.dispose(),l.dispose(),a.reject(L)}})}t.createCancelableAsyncIterable=_}),define(te[22],ne([0,1,38,20,8,13,5,2,3]),function(ee,t,B,q,F,N,M,j,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patternsEquals=t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function f(){return Object.create(null)}t.getEmptyExpression=f,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const w="[/\\\\]",A="[^/\\\\]",b=/\//g;function R(D,U){switch(D){case 0:return"";case 1:return`${A}*?`;default:return`(?:${w}|${A}+${w}${U?`|${w}${A}+`:""})*?`}}function p(D,U){if(!D)return[];const T=[];let G=!1,z=!1,Q="";for(const _ of D){switch(_){case U:if(!G&&!z){T.push(Q),Q="";continue}break;case"{":G=!0;break;case"}":G=!1;break;case"[":z=!0;break;case"]":z=!1;break}Q+=_}return Q&&T.push(Q),T}t.splitGlobAware=p;function u(D){if(!D)return"";let U="";const T=p(D,t.GLOB_SPLIT);if(T.every(G=>G===t.GLOBSTAR))U=".*";else{let G=!1;T.forEach((z,Q)=>{if(z===t.GLOBSTAR){if(G)return;U+=R(2,Q===T.length-1)}else{let _=!1,y="",l=!1,e="";for(const a of z){if(a!=="}"&&_){y+=a;continue}if(l&&(a!=="]"||!e)){let S;a==="-"?S=a:(a==="^"||a==="!")&&!e?S="^":a===t.GLOB_SPLIT?S="":S=(0,k.escapeRegExpCharacters)(a),e+=S;continue}switch(a){case"{":_=!0;continue;case"[":l=!0;continue;case"}":{const L=`(?:${p(y,",").map(x=>u(x)).join("|")})`;U+=L,_=!1,y="";break}case"]":{U+="["+e+"]",l=!1,e="";break}case"?":U+=A;continue;case"*":U+=R(1);continue;default:U+=(0,k.escapeRegExpCharacters)(a)}}Q<T.length-1&&(T[Q+1]!==t.GLOBSTAR||Q+2<T.length)&&(U+=w)}G=z===t.GLOBSTAR})}return U}const s=/^\*\*\/\*\.[\w\.-]+$/,c=/^\*\*\/([\w\.-]+)\/?$/,n=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,o=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,h=new N.LRUCache(1e4),E=function(){return!1},v=function(){return null};function P(D,U){if(!D)return v;let T;typeof D!="string"?T=D.pattern:T=D,T=T.trim();const G=`${T}_${!!U.trimForExclusions}`;let z=h.get(G);if(z)return O(z,D);let Q;return s.test(T)?z=m(T.substr(4),T):(Q=c.exec(d(T,U)))?z=g(Q[1],T):(U.trimForExclusions?r:n).test(T)?z=C(T,U):(Q=i.exec(d(T,U)))?z=W(Q[1].substr(1),T,!0):(Q=o.exec(d(T,U)))?z=W(Q[1],T,!1):z=$(T),h.set(G,z),O(z,D)}function O(D,U){if(typeof U=="string")return D;const T=function(G,z){return(0,F.isEqualOrParent)(G,U.base,!j.isLinux)?D((0,k.ltrim)(G.substr(U.base.length),M.sep),z):null};return T.allBasenames=D.allBasenames,T.allPaths=D.allPaths,T.basenames=D.basenames,T.patterns=D.patterns,T}function d(D,U){return U.trimForExclusions&&D.endsWith("/**")?D.substr(0,D.length-2):D}function m(D,U){return function(T,G){return typeof T=="string"&&T.endsWith(D)?U:null}}function g(D,U){const T=`/${D}`,G=`\\${D}`,z=function(_,y){return typeof _!="string"?null:y?y===D?U:null:_===D||_.endsWith(T)||_.endsWith(G)?U:null},Q=[D];return z.basenames=Q,z.patterns=[U],z.allBasenames=Q,z}function C(D,U){const T=I(D.slice(1,-1).split(",").map(y=>P(y,U)).filter(y=>y!==v),D),G=T.length;if(!G)return v;if(G===1)return T[0];const z=function(y,l){for(let e=0,a=T.length;e<a;e++)if(T[e](y,l))return D;return null},Q=T.find(y=>!!y.allBasenames);Q&&(z.allBasenames=Q.allBasenames);const _=T.reduce((y,l)=>l.allPaths?y.concat(l.allPaths):y,[]);return _.length&&(z.allPaths=_),z}function W(D,U,T){const G=M.sep===M.posix.sep,z=G?D:D.replace(b,M.sep),Q=M.sep+z,_=M.posix.sep+D;let y;return T?y=function(l,e){return typeof l=="string"&&(l===z||l.endsWith(Q)||!G&&(l===D||l.endsWith(_)))?U:null}:y=function(l,e){return typeof l=="string"&&(l===z||!G&&l===D)?U:null},y.allPaths=[(T?"*/":"./")+D],y}function $(D){try{const U=new RegExp(`^${u(D)}$`);return function(T){return U.lastIndex=0,typeof T=="string"&&U.test(T)?D:null}}catch{return v}}function K(D,U,T){return!D||typeof U!="string"?!1:Z(D)(U,void 0,T)}t.match=K;function Z(D,U={}){if(!D)return E;if(typeof D=="string"||Y(D)){const T=P(D,U);if(T===v)return E;const G=function(z,Q){return!!T(z,Q)};return T.allBasenames&&(G.allBasenames=T.allBasenames),T.allPaths&&(G.allPaths=T.allPaths),G}return re(D,U)}t.parse=Z;function Y(D){const U=D;return U?typeof U.base=="string"&&typeof U.pattern=="string":!1}t.isRelativePattern=Y;function J(D){return D.allBasenames||[]}t.getBasenameTerms=J;function ie(D){return D.allPaths||[]}t.getPathTerms=ie;function re(D,U){const T=I(Object.getOwnPropertyNames(D).map(y=>ae(y,D[y],U)).filter(y=>y!==v)),G=T.length;if(!G)return v;if(!T.some(y=>!!y.requiresSiblings)){if(G===1)return T[0];const y=function(a,S){let L;for(let x=0,V=T.length;x<V;x++){const X=T[x](a,S);if(typeof X=="string")return X;(0,q.isThenable)(X)&&(L||(L=[]),L.push(X))}return L?(async()=>{for(const x of L){const V=await x;if(typeof V=="string")return V}return null})():null},l=T.find(a=>!!a.allBasenames);l&&(y.allBasenames=l.allBasenames);const e=T.reduce((a,S)=>S.allPaths?a.concat(S.allPaths):a,[]);return e.length&&(y.allPaths=e),y}const z=function(y,l,e){let a,S;for(let L=0,x=T.length;L<x;L++){const V=T[L];V.requiresSiblings&&e&&(l||(l=(0,M.basename)(y)),a||(a=l.substr(0,l.length-(0,M.extname)(y).length)));const X=V(y,l,a,e);if(typeof X=="string")return X;(0,q.isThenable)(X)&&(S||(S=[]),S.push(X))}return S?(async()=>{for(const L of S){const x=await L;if(typeof x=="string")return x}return null})():null},Q=T.find(y=>!!y.allBasenames);Q&&(z.allBasenames=Q.allBasenames);const _=T.reduce((y,l)=>l.allPaths?y.concat(l.allPaths):y,[]);return _.length&&(z.allPaths=_),z}function ae(D,U,T){if(U===!1)return v;const G=P(D,T);if(G===v)return v;if(typeof U=="boolean")return G;if(U){const z=U.when;if(typeof z=="string"){const Q=(_,y,l,e)=>{if(!e||!G(_,y))return null;const a=z.replace("$(basename)",()=>l),S=e(a);return(0,q.isThenable)(S)?S.then(L=>L?D:null):S?D:null};return Q.requiresSiblings=!0,Q}}return G}function I(D,U){const T=D.filter(y=>!!y.basenames);if(T.length<2)return D;const G=T.reduce((y,l)=>{const e=l.basenames;return e?y.concat(e):y},[]);let z;if(U){z=[];for(let y=0,l=G.length;y<l;y++)z.push(U)}else z=T.reduce((y,l)=>{const e=l.patterns;return e?y.concat(e):y},[]);const Q=function(y,l){if(typeof y!="string")return null;if(!l){let a;for(a=y.length;a>0;a--){const S=y.charCodeAt(a-1);if(S===47||S===92)break}l=y.substr(a)}const e=G.indexOf(l);return e!==-1?z[e]:null};Q.basenames=G,Q.patterns=z,Q.allBasenames=G;const _=D.filter(y=>!y.basenames);return _.push(Q),_}function H(D,U){return(0,B.equals)(D,U,(T,G)=>typeof T=="string"&&typeof G=="string"?T===G:typeof T!="string"&&typeof G!="string"?T.base===G.base&&T.pattern===G.pattern:!1)}t.patternsEquals=H}),define(te[23],ne([0,1,3,2,6]),function(ee,t,B,q,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringBuilder=t.decodeUTF16LE=t.getPlatformTextDecoder=void 0;let N;function M(){return N||(N=new TextDecoder("UTF-16LE")),N}let j;function k(){return j||(j=new TextDecoder("UTF-16BE")),j}let f;function w(){return f||(f=q.isLittleEndian()?M():k()),f}t.getPlatformTextDecoder=w;function A(p,u,s){const c=new Uint16Array(p.buffer,u,s);return s>0&&(c[0]===65279||c[0]===65534)?b(p,u,s):M().decode(c)}t.decodeUTF16LE=A;function b(p,u,s){const c=[];let n=0;for(let r=0;r<s;r++){const i=F.readUInt16LE(p,u);u+=2,c[n++]=String.fromCharCode(i)}return c.join("")}class R{constructor(u){this.a=u|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const u=new Uint16Array(this.b.buffer,0,this.d);return w().decode(u)}f(){const u=this.e();this.d=0,this.c===null?this.c=[u]:this.c[this.c.length]=u}appendCharCode(u){const s=this.a-this.d;s<=1&&(s===0||B.isHighSurrogate(u))&&this.f(),this.b[this.d++]=u}appendASCIICharCode(u){this.d===this.a&&this.f(),this.b[this.d++]=u}appendString(u){const s=u.length;if(this.d+s>=this.a){this.f(),this.c[this.c.length]=u;return}for(let c=0;c<s;c++)this.b[this.d++]=u.charCodeAt(c)}}t.StringBuilder=R}),define(te[24],ne([0,1,6,23]),function(ee,t,B,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressConsecutiveTextChanges=t.TextChange=void 0;function F(k){return k.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class N{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(f,w,A,b){this.oldPosition=f,this.oldText=w,this.newPosition=A,this.newText=b}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${F(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${F(this.oldText)}")`:`(replace@${this.oldPosition} "${F(this.oldText)}" with "${F(this.newText)}")`}static a(f){return 4+2*f.length}static c(f,w,A){const b=w.length;B.writeUInt32BE(f,b,A),A+=4;for(let R=0;R<b;R++)B.writeUInt16LE(f,w.charCodeAt(R),A),A+=2;return A}static d(f,w){const A=B.readUInt32BE(f,w);return w+=4,(0,q.decodeUTF16LE)(f,w,A)}writeSize(){return 4+4+N.a(this.oldText)+N.a(this.newText)}write(f,w){return B.writeUInt32BE(f,this.oldPosition,w),w+=4,B.writeUInt32BE(f,this.newPosition,w),w+=4,w=N.c(f,this.oldText,w),w=N.c(f,this.newText,w),w}static read(f,w,A){const b=B.readUInt32BE(f,w);w+=4;const R=B.readUInt32BE(f,w);w+=4;const p=N.d(f,w);w+=N.a(p);const u=N.d(f,w);return w+=N.a(u),A.push(new N(b,p,R,u)),w}}t.TextChange=N;function M(k,f){return k===null||k.length===0?f:new j(k,f).compress()}t.compressConsecutiveTextChanges=M;class j{constructor(f,w){this.a=f,this.c=w,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let f=0,w=0,A=this.n(f),b=this.l(w);for(;f<this.f||w<this.h;){if(A===null){this.k(b),b=this.l(++w);continue}if(b===null){this.m(A),A=this.n(++f);continue}if(b.oldEnd<=A.newPosition){this.k(b),b=this.l(++w);continue}if(A.newEnd<=b.oldPosition){this.m(A),A=this.n(++f);continue}if(b.oldPosition<A.newPosition){const[c,n]=j.r(b,A.newPosition-b.oldPosition);this.k(c),b=n;continue}if(A.newPosition<b.oldPosition){const[c,n]=j.q(A,b.oldPosition-A.newPosition);this.m(c),A=n;continue}let u,s;if(b.oldEnd===A.newEnd)u=A,s=b,A=this.n(++f),b=this.l(++w);else if(b.oldEnd<A.newEnd){const[c,n]=j.q(A,b.oldLength);u=c,s=b,A=n,b=this.l(++w)}else{const[c,n]=j.r(b,A.newLength);u=A,s=c,A=this.n(++f),b=n}this.d[this.e++]=new N(u.oldPosition,u.oldText,s.newPosition,s.newText),this.g+=u.newLength-u.oldLength,this.j+=s.newLength-s.oldLength}const R=j.s(this.d);return j.t(R)}k(f){this.d[this.e++]=j.o(this.g,f),this.j+=f.newLength-f.oldLength}l(f){return f<this.h?this.c[f]:null}m(f){this.d[this.e++]=j.p(this.j,f),this.g+=f.newLength-f.oldLength}n(f){return f<this.f?this.a[f]:null}static o(f,w){return new N(w.oldPosition-f,w.oldText,w.newPosition,w.newText)}static p(f,w){return new N(w.oldPosition,w.oldText,w.newPosition+f,w.newText)}static q(f,w){const A=f.newText.substr(0,w),b=f.newText.substr(w);return[new N(f.oldPosition,f.oldText,f.newPosition,A),new N(f.oldEnd,"",f.newPosition+w,b)]}static r(f,w){const A=f.oldText.substr(0,w),b=f.oldText.substr(w);return[new N(f.oldPosition,A,f.newPosition,f.newText),new N(f.oldPosition+w,b,f.newEnd,"")]}static s(f){if(f.length===0)return f;const w=[];let A=0,b=f[0];for(let R=1;R<f.length;R++){const p=f[R];b.oldEnd===p.oldPosition?b=new N(b.oldPosition,b.oldText+p.oldText,b.newPosition,b.newText+p.newText):(w[A++]=b,b=p)}return w[A++]=b,w}static t(f){if(f.length===0)return f;const w=[];let A=0;for(let b=0;b<f.length;b++){const R=f[b];R.oldText!==R.newText&&(w[A++]=R)}return w}}}),define(te[11],ne([0,1,39,12,25,17,40]),function(ee,t,B,q,F,N,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeBase=t.StringBuffer=t.Piece=t.createLineStarts=t.createLineStartsFast=void 0;const j=65535;function k(c){let n;return c[c.length-1]<65536?n=new Uint16Array(c.length):n=new Uint32Array(c.length),n.set(c,0),n}class f{constructor(n,r,i,o,h){this.lineStarts=n,this.cr=r,this.lf=i,this.crlf=o,this.isBasicASCII=h}}function w(c,n=!0){const r=[0];let i=1;for(let o=0,h=c.length;o<h;o++){const E=c.charCodeAt(o);E===13?o+1<h&&c.charCodeAt(o+1)===10?(r[i++]=o+2,o++):r[i++]=o+1:E===10&&(r[i++]=o+1)}return n?k(r):r}t.createLineStartsFast=w;function A(c,n){c.length=0,c[0]=0;let r=1,i=0,o=0,h=0,E=!0;for(let P=0,O=n.length;P<O;P++){const d=n.charCodeAt(P);d===13?P+1<O&&n.charCodeAt(P+1)===10?(h++,c[r++]=P+2,P++):(i++,c[r++]=P+1):d===10?(o++,c[r++]=P+1):E&&d!==9&&(d<32||d>126)&&(E=!1)}const v=new f(k(c),i,o,h,E);return c.length=0,v}t.createLineStarts=A;class b{constructor(n,r,i,o,h){this.bufferIndex=n,this.start=r,this.end=i,this.lineFeedCnt=o,this.length=h}}t.Piece=b;class R{constructor(n,r){this.buffer=n,this.lineStarts=r}}t.StringBuffer=R;class p{constructor(n,r){this.a=[],this.c=n,this.d=r,this.b=0,n.root!==N.SENTINEL&&n.iterate(n.root,i=>(i!==N.SENTINEL&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class u{constructor(n){this.a=n,this.b=[]}get(n){for(let r=this.b.length-1;r>=0;r--){const i=this.b[r];if(i.nodeStartOffset<=n&&i.nodeStartOffset+i.node.piece.length>=n)return i}return null}get2(n){for(let r=this.b.length-1;r>=0;r--){const i=this.b[r];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<n&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=n)return i}return null}set(n){this.b.length>=this.a&&this.b.shift(),this.b.push(n)}validate(n){let r=!1;const i=this.b;for(let o=0;o<i.length;o++){const h=i[o];if(h.node.parent===null||h.nodeStartOffset>=n){i[o]=null,r=!0;continue}}if(r){const o=[];for(const h of i)h!==null&&o.push(h);this.b=o}}}class s{constructor(n,r,i){this.create(n,r,i)}create(n,r,i){this.a=[new R("",[0])],this.g={line:0,column:0},this.root=N.SENTINEL,this.b=1,this.c=0,this.d=r,this.e=r.length,this.f=i;let o=null;for(let h=0,E=n.length;h<E;h++)if(n[h].buffer.length>0){n[h].lineStarts||(n[h].lineStarts=w(n[h].buffer));const v=new b(h+1,{line:0,column:0},{line:n[h].lineStarts.length-1,column:n[h].buffer.length-n[h].lineStarts[n[h].lineStarts.length-1]},n[h].lineStarts.length-1,n[h].buffer.length);this.a.push(n[h]),o=this.S(o,v)}this.h=new u(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(n){const r=j,i=r-Math.floor(r/3),o=i*2;let h="",E=0;const v=[];if(this.iterate(this.root,P=>{const O=this.R(P),d=O.length;if(E<=i||E+d<o)return h+=O,E+=d,!0;const m=h.replace(/\r\n|\r|\n/g,n);return v.push(new R(m,w(m))),h=O,E=d,!0}),E>0){const P=h.replace(/\r\n|\r|\n/g,n);v.push(new R(P,w(P)))}this.create(v,n,!0)}getEOL(){return this.d}setEOL(n){this.d=n,this.e=this.d.length,this.normalizeEOL(n)}createSnapshot(n){return new p(this,n)}equal(n){if(this.getLength()!==n.getLength()||this.getLineCount()!==n.getLineCount())return!1;const r=0;return this.iterate(this.root,o=>{if(o===N.SENTINEL)return!0;const h=this.R(o),E=h.length,v=n.G(r),P=n.G(r+E),O=n.getValueInRange2(v,P);return h===O})}getOffsetAt(n,r){let i=0,o=this.root;for(;o!==N.SENTINEL;)if(o.left!==N.SENTINEL&&o.lf_left+1>=n)o=o.left;else if(o.lf_left+o.piece.lineFeedCnt+1>=n){i+=o.size_left;const h=this.B(o,n-o.lf_left-2);return i+=h+r-1}else n-=o.lf_left+o.piece.lineFeedCnt,i+=o.size_left+o.piece.length,o=o.right;return i}getPositionAt(n){n=Math.floor(n),n=Math.max(0,n);let r=this.root,i=0;const o=n;for(;r!==N.SENTINEL;)if(r.size_left!==0&&r.size_left>=n)r=r.left;else if(r.size_left+r.piece.length>=n){const h=this.A(r,n-r.size_left);if(i+=r.lf_left+h.index,h.index===0){const E=this.getOffsetAt(i+1,1),v=o-E;return new B.Position(i+1,v+1)}return new B.Position(i+1,h.remainder+1)}else if(n-=r.size_left+r.piece.length,i+=r.lf_left+r.piece.lineFeedCnt,r.right===N.SENTINEL){const h=this.getOffsetAt(i+1,1),E=o-n-h;return new B.Position(i+1,E+1)}else r=r.right;return new B.Position(1,1)}getValueInRange(n,r){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return"";const i=this.H(n.startLineNumber,n.startColumn),o=this.H(n.endLineNumber,n.endColumn),h=this.getValueInRange2(i,o);return r?r!==this.d||!this.f?h.replace(/\r\n|\r|\n/g,r):r===this.getEOL()&&this.f?h:h.replace(/\r\n|\r|\n/g,r):h}getValueInRange2(n,r){if(n.node===r.node){const v=n.node,P=this.a[v.piece.bufferIndex].buffer,O=this.u(v.piece.bufferIndex,v.piece.start);return P.substring(O+n.remainder,O+r.remainder)}let i=n.node;const o=this.a[i.piece.bufferIndex].buffer,h=this.u(i.piece.bufferIndex,i.piece.start);let E=o.substring(h+n.remainder,h+i.piece.length);for(i=i.next();i!==N.SENTINEL;){const v=this.a[i.piece.bufferIndex].buffer,P=this.u(i.piece.bufferIndex,i.piece.start);if(i===r.node){E+=v.substring(P,P+r.remainder);break}else E+=v.substr(P,i.piece.length);i=i.next()}return E}getLinesContent(){const n=[];let r=0,i="",o=!1;return this.iterate(this.root,h=>{if(h===N.SENTINEL)return!0;const E=h.piece;let v=E.length;if(v===0)return!0;const P=this.a[E.bufferIndex].buffer,O=this.a[E.bufferIndex].lineStarts,d=E.start.line,m=E.end.line;let g=O[d]+E.start.column;if(o&&(P.charCodeAt(g)===10&&(g++,v--),n[r++]=i,i="",o=!1,v===0))return!0;if(d===m)return!this.f&&P.charCodeAt(g+v-1)===13?(o=!0,i+=P.substr(g,v-1)):i+=P.substr(g,v),!0;i+=this.f?P.substring(g,Math.max(g,O[d+1]-this.e)):P.substring(g,O[d+1]).replace(/(\r\n|\r|\n)$/,""),n[r++]=i;for(let C=d+1;C<m;C++)i=this.f?P.substring(O[C],O[C+1]-this.e):P.substring(O[C],O[C+1]).replace(/(\r\n|\r|\n)$/,""),n[r++]=i;return!this.f&&P.charCodeAt(O[m]+E.end.column-1)===13?(o=!0,E.end.column===0?r--:i=P.substr(O[m],E.end.column-1)):i=P.substr(O[m],E.end.column),!0}),o&&(n[r++]=i,i=""),n[r++]=i,n}getLength(){return this.c}getLineCount(){return this.b}getLineContent(n){return this.j.lineNumber===n?this.j.value:(this.j.lineNumber=n,n===this.b?this.j.value=this.getLineRawContent(n):this.f?this.j.value=this.getLineRawContent(n,this.e):this.j.value=this.getLineRawContent(n).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(n){if(n.remainder===n.node.piece.length){const r=n.node.next();if(!r)return 0;const i=this.a[r.piece.bufferIndex],o=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.charCodeAt(o)}else{const r=this.a[n.node.piece.bufferIndex],o=this.u(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return r.buffer.charCodeAt(o)}}getLineCharCode(n,r){const i=this.H(n,r+1);return this.l(i)}getLineLength(n){if(n===this.getLineCount()){const r=this.getOffsetAt(n,1);return this.getLength()-r}return this.getOffsetAt(n+1,1)-this.getOffsetAt(n,1)-this.e}getCharCode(n){const r=this.G(n);return this.l(r)}findMatchesInNode(n,r,i,o,h,E,v,P,O,d,m){const g=this.a[n.piece.bufferIndex],C=this.u(n.piece.bufferIndex,n.piece.start),W=this.u(n.piece.bufferIndex,h),$=this.u(n.piece.bufferIndex,E);let K;const Z={line:0,column:0};let Y,J;r._wordSeparators?(Y=g.buffer.substring(W,$),J=ie=>ie+W,r.reset(0)):(Y=g.buffer,J=ie=>ie,r.reset(W));do if(K=r.next(Y),K){if(J(K.index)>=$)return d;this.s(n,J(K.index)-C,Z);const ie=this.t(n.piece.bufferIndex,h,Z),re=Z.line===h.line?Z.column-h.column+o:Z.column+1,ae=re+K[0].length;if(m[d++]=(0,M.createFindMatch)(new q.Range(i+ie,re,i+ie,ae),K,P),J(K.index)+K[0].length>=$||d>=O)return d}while(K);return d}findMatchesLineByLine(n,r,i,o){const h=[];let E=0;const v=new M.Searcher(r.wordSeparators,r.regex);let P=this.H(n.startLineNumber,n.startColumn);if(P===null)return[];const O=this.H(n.endLineNumber,n.endColumn);if(O===null)return[];let d=this.s(P.node,P.remainder);const m=this.s(O.node,O.remainder);if(P.node===O.node)return this.findMatchesInNode(P.node,v,n.startLineNumber,n.startColumn,d,m,r,i,o,E,h),h;let g=n.startLineNumber,C=P.node;for(;C!==O.node;){const $=this.t(C.piece.bufferIndex,d,C.piece.end);if($>=1){const Z=this.a[C.piece.bufferIndex].lineStarts,Y=this.u(C.piece.bufferIndex,C.piece.start),J=Z[d.line+$],ie=g===n.startLineNumber?n.startColumn:1;if(E=this.findMatchesInNode(C,v,g,ie,d,this.s(C,J-Y),r,i,o,E,h),E>=o)return h;g+=$}const K=g===n.startLineNumber?n.startColumn-1:0;if(g===n.endLineNumber){const Z=this.getLineContent(g).substring(K,n.endColumn-1);return E=this.n(r,v,Z,n.endLineNumber,K,E,h,i,o),h}if(E=this.n(r,v,this.getLineContent(g).substr(K),g,K,E,h,i,o),E>=o)return h;g++,P=this.H(g,1),C=P.node,d=this.s(P.node,P.remainder)}if(g===n.endLineNumber){const $=g===n.startLineNumber?n.startColumn-1:0,K=this.getLineContent(g).substring($,n.endColumn-1);return E=this.n(r,v,K,n.endLineNumber,$,E,h,i,o),h}const W=g===n.startLineNumber?n.startColumn:1;return E=this.findMatchesInNode(O.node,v,g,W,d,m,r,i,o,E,h),h}n(n,r,i,o,h,E,v,P,O){const d=n.wordSeparators;if(!P&&n.simpleSearch){const g=n.simpleSearch,C=g.length,W=i.length;let $=-C;for(;($=i.indexOf(g,$+C))!==-1;)if((!d||(0,M.isValidMatch)(d,i,W,$,C))&&(v[E++]=new F.FindMatch(new q.Range(o,$+1+h,o,$+1+C+h),null),E>=O))return E;return E}let m;r.reset(0);do if(m=r.next(i),m&&(v[E++]=(0,M.createFindMatch)(new q.Range(o,m.index+1+h,o,m.index+1+m[0].length+h),m,P),E>=O))return E;while(m);return E}insert(n,r,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==N.SENTINEL){const{node:o,remainder:h,nodeStartOffset:E}=this.G(n),v=o.piece,P=v.bufferIndex,O=this.s(o,h);if(o.piece.bufferIndex===0&&v.end.line===this.g.line&&v.end.column===this.g.column&&E+v.length===n&&r.length<j){this.F(o,r),this.y();return}if(E===n)this.o(r,o),this.h.validate(n);else if(E+o.piece.length>n){const d=[];let m=new b(v.bufferIndex,O,v.end,this.t(v.bufferIndex,O,v.end),this.u(P,v.end)-this.u(P,O));if(this.K()&&this.M(r)&&this.I(o,h)===10){const $={line:m.start.line+1,column:0};m=new b(m.bufferIndex,$,m.end,this.t(m.bufferIndex,$,m.end),m.length-1),r+=`
`}if(this.K()&&this.L(r))if(this.I(o,h-1)===13){const $=this.s(o,h-1);this.C(o,$),r="\r"+r,o.piece.length===0&&d.push(o)}else this.C(o,O);else this.C(o,O);const g=this.w(r);m.length>0&&this.S(o,m);let C=o;for(let W=0;W<g.length;W++)C=this.S(C,g[W]);this.v(d)}else this.q(r,o)}else{const o=this.w(r);let h=this.T(null,o[0]);for(let E=1;E<o.length;E++)h=this.S(h,o[E])}this.y()}delete(n,r){if(this.j.lineNumber=0,this.j.value="",r<=0||this.root===N.SENTINEL)return;const i=this.G(n),o=this.G(n+r),h=i.node,E=o.node;if(h===E){const g=this.s(h,i.remainder),C=this.s(h,o.remainder);if(i.nodeStartOffset===n){if(r===h.piece.length){const W=h.next();(0,N.rbDelete)(this,h),this.N(W),this.y();return}this.D(h,C),this.h.validate(n),this.N(h),this.y();return}if(i.nodeStartOffset+h.piece.length===n+r){this.C(h,g),this.O(h),this.y();return}this.E(h,g,C),this.y();return}const v=[],P=this.s(h,i.remainder);this.C(h,P),this.h.validate(n),h.piece.length===0&&v.push(h);const O=this.s(E,o.remainder);this.D(E,O),E.piece.length===0&&v.push(E);const d=h.next();for(let g=d;g!==N.SENTINEL&&g!==E;g=g.next())v.push(g);const m=h.piece.length===0?h.prev():h;this.v(v),this.O(m),this.y()}o(n,r){const i=[];if(this.K()&&this.M(n)&&this.L(r)){const E=r.piece,v={line:E.start.line+1,column:0},P=new b(E.bufferIndex,v,E.end,this.t(E.bufferIndex,v,E.end),E.length-1);r.piece=P,n+=`
`,(0,N.updateTreeMetadata)(this,r,-1,-1),r.piece.length===0&&i.push(r)}const o=this.w(n);let h=this.T(r,o[o.length-1]);for(let E=o.length-2;E>=0;E--)h=this.T(h,o[E]);this.N(h),this.v(i)}q(n,r){this.Q(n,r)&&(n+=`
`);const i=this.w(n),o=this.S(r,i[0]);let h=o;for(let E=1;E<i.length;E++)h=this.S(h,i[E]);this.N(o)}s(n,r,i){const o=n.piece,h=n.piece.bufferIndex,E=this.a[h].lineStarts,P=E[o.start.line]+o.start.column+r;let O=o.start.line,d=o.end.line,m=0,g=0,C=0;for(;O<=d&&(m=O+(d-O)/2|0,C=E[m],m!==d);)if(g=E[m+1],P<C)d=m-1;else if(P>=g)O=m+1;else break;return i?(i.line=m,i.column=P-C,null):{line:m,column:P-C}}t(n,r,i){if(i.column===0)return i.line-r.line;const o=this.a[n].lineStarts;if(i.line===o.length-1)return i.line-r.line;const h=o[i.line+1],E=o[i.line]+i.column;if(h>E+1)return i.line-r.line;const v=E-1;return this.a[n].buffer.charCodeAt(v)===13?i.line-r.line+1:i.line-r.line}u(n,r){return this.a[n].lineStarts[r.line]+r.column}v(n){for(let r=0;r<n.length;r++)(0,N.rbDelete)(this,n[r])}w(n){if(n.length>j){const d=[];for(;n.length>j;){const g=n.charCodeAt(j-1);let C;g===13||g>=55296&&g<=56319?(C=n.substring(0,j-1),n=n.substring(j-1)):(C=n.substring(0,j),n=n.substring(j));const W=w(C);d.push(new b(this.a.length,{line:0,column:0},{line:W.length-1,column:C.length-W[W.length-1]},W.length-1,C.length)),this.a.push(new R(C,W))}const m=w(n);return d.push(new b(this.a.length,{line:0,column:0},{line:m.length-1,column:n.length-m[m.length-1]},m.length-1,n.length)),this.a.push(new R(n,m)),d}let r=this.a[0].buffer.length;const i=w(n,!1);let o=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===r&&r!==0&&this.L(n)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},o=this.g;for(let d=0;d<i.length;d++)i[d]+=r+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+n,r+=1}else{if(r!==0)for(let d=0;d<i.length;d++)i[d]+=r;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=n}const h=this.a[0].buffer.length,E=this.a[0].lineStarts.length-1,v=h-this.a[0].lineStarts[E],P={line:E,column:v},O=new b(0,o,P,this.t(0,o,P),h-r);return this.g=P,[O]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(n,r=0){let i=this.root,o="";const h=this.h.get2(n);if(h){i=h.node;const E=this.B(i,n-h.nodeStartLineNumber-1),v=this.a[i.piece.bufferIndex].buffer,P=this.u(i.piece.bufferIndex,i.piece.start);if(h.nodeStartLineNumber+i.piece.lineFeedCnt===n)o=v.substring(P+E,P+i.piece.length);else{const O=this.B(i,n-h.nodeStartLineNumber);return v.substring(P+E,P+O-r)}}else{let E=0;const v=n;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const P=this.B(i,n-i.lf_left-2),O=this.B(i,n-i.lf_left-1),d=this.a[i.piece.bufferIndex].buffer,m=this.u(i.piece.bufferIndex,i.piece.start);return E+=i.size_left,this.h.set({node:i,nodeStartOffset:E,nodeStartLineNumber:v-(n-1-i.lf_left)}),d.substring(m+P,m+O-r)}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const P=this.B(i,n-i.lf_left-2),O=this.a[i.piece.bufferIndex].buffer,d=this.u(i.piece.bufferIndex,i.piece.start);o=O.substring(d+P,d+i.piece.length);break}else n-=i.lf_left+i.piece.lineFeedCnt,E+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==N.SENTINEL;){const E=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const v=this.B(i,0),P=this.u(i.piece.bufferIndex,i.piece.start);return o+=E.substring(P,P+v-r),o}else{const v=this.u(i.piece.bufferIndex,i.piece.start);o+=E.substr(v,i.piece.length)}i=i.next()}return o}y(){let n=this.root,r=1,i=0;for(;n!==N.SENTINEL;)r+=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;this.b=r,this.c=i,this.h.validate(this.c)}A(n,r){const i=n.piece,o=this.s(n,r),h=o.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===r){const E=this.t(n.piece.bufferIndex,i.start,o);if(E!==h)return{index:E,remainder:0}}return{index:h,remainder:o.column}}B(n,r){if(r<0)return 0;const i=n.piece,o=this.a[i.bufferIndex].lineStarts,h=i.start.line+r+1;return h>i.end.line?o[i.end.line]+i.end.column-o[i.start.line]-i.start.column:o[h]-o[i.start.line]-i.start.column}C(n,r){const i=n.piece,o=i.lineFeedCnt,h=this.u(i.bufferIndex,i.end),E=r,v=this.u(i.bufferIndex,E),P=this.t(i.bufferIndex,i.start,E),O=P-o,d=v-h,m=i.length+d;n.piece=new b(i.bufferIndex,i.start,E,P,m),(0,N.updateTreeMetadata)(this,n,d,O)}D(n,r){const i=n.piece,o=i.lineFeedCnt,h=this.u(i.bufferIndex,i.start),E=r,v=this.t(i.bufferIndex,E,i.end),P=this.u(i.bufferIndex,E),O=v-o,d=h-P,m=i.length+d;n.piece=new b(i.bufferIndex,E,i.end,v,m),(0,N.updateTreeMetadata)(this,n,d,O)}E(n,r,i){const o=n.piece,h=o.start,E=o.end,v=o.length,P=o.lineFeedCnt,O=r,d=this.t(o.bufferIndex,o.start,O),m=this.u(o.bufferIndex,r)-this.u(o.bufferIndex,h);n.piece=new b(o.bufferIndex,o.start,O,d,m),(0,N.updateTreeMetadata)(this,n,m-v,d-P);const g=new b(o.bufferIndex,i,E,this.t(o.bufferIndex,i,E),this.u(o.bufferIndex,E)-this.u(o.bufferIndex,i)),C=this.S(n,g);this.N(C)}F(n,r){this.Q(r,n)&&(r+=`
`);const i=this.K()&&this.L(r)&&this.M(n),o=this.a[0].buffer.length;this.a[0].buffer+=r;const h=w(r,!1);for(let C=0;C<h.length;C++)h[C]+=o;if(i){const C=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:o-C}}this.a[0].lineStarts=this.a[0].lineStarts.concat(h.slice(1));const E=this.a[0].lineStarts.length-1,v=this.a[0].buffer.length-this.a[0].lineStarts[E],P={line:E,column:v},O=n.piece.length+r.length,d=n.piece.lineFeedCnt,m=this.t(0,n.piece.start,P),g=m-d;n.piece=new b(n.piece.bufferIndex,n.piece.start,P,m,O),this.g=P,(0,N.updateTreeMetadata)(this,n,r.length,g)}G(n){let r=this.root;const i=this.h.get(n);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:n-i.nodeStartOffset};let o=0;for(;r!==N.SENTINEL;)if(r.size_left>n)r=r.left;else if(r.size_left+r.piece.length>=n){o+=r.size_left;const h={node:r,remainder:n-r.size_left,nodeStartOffset:o};return this.h.set(h),h}else n-=r.size_left+r.piece.length,o+=r.size_left+r.piece.length,r=r.right;return null}H(n,r){let i=this.root,o=0;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const h=this.B(i,n-i.lf_left-2),E=this.B(i,n-i.lf_left-1);return o+=i.size_left,{node:i,remainder:Math.min(h+r-1,E),nodeStartOffset:o}}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const h=this.B(i,n-i.lf_left-2);if(h+r-1<=i.piece.length)return{node:i,remainder:h+r-1,nodeStartOffset:o};r-=i.piece.length-h;break}else n-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==N.SENTINEL;){if(i.piece.lineFeedCnt>0){const h=this.B(i,0),E=this.J(i);return{node:i,remainder:Math.min(r-1,h),nodeStartOffset:E}}else if(i.piece.length>=r-1){const h=this.J(i);return{node:i,remainder:r-1,nodeStartOffset:h}}else r-=i.piece.length;i=i.next()}return null}I(n,r){if(n.piece.lineFeedCnt<1)return-1;const i=this.a[n.piece.bufferIndex],o=this.u(n.piece.bufferIndex,n.piece.start)+r;return i.buffer.charCodeAt(o)}J(n){if(!n)return 0;let r=n.size_left;for(;n!==this.root;)n.parent.right===n&&(r+=n.parent.size_left+n.parent.piece.length),n=n.parent;return r}K(){return!(this.f&&this.d===`
`)}L(n){if(typeof n=="string")return n.charCodeAt(0)===10;if(n===N.SENTINEL||n.piece.lineFeedCnt===0)return!1;const r=n.piece,i=this.a[r.bufferIndex].lineStarts,o=r.start.line,h=i[o]+r.start.column;return o===i.length-1||i[o+1]>h+1?!1:this.a[r.bufferIndex].buffer.charCodeAt(h)===10}M(n){return typeof n=="string"?n.charCodeAt(n.length-1)===13:n===N.SENTINEL||n.piece.lineFeedCnt===0?!1:this.I(n,n.piece.length-1)===13}N(n){if(this.K()&&this.L(n)){const r=n.prev();this.M(r)&&this.P(r,n)}}O(n){if(this.K()&&this.M(n)){const r=n.next();this.L(r)&&this.P(n,r)}}P(n,r){const i=[],o=this.a[n.piece.bufferIndex].lineStarts;let h;n.piece.end.column===0?h={line:n.piece.end.line-1,column:o[n.piece.end.line]-o[n.piece.end.line-1]-1}:h={line:n.piece.end.line,column:n.piece.end.column-1};const E=n.piece.length-1,v=n.piece.lineFeedCnt-1;n.piece=new b(n.piece.bufferIndex,n.piece.start,h,v,E),(0,N.updateTreeMetadata)(this,n,-1,-1),n.piece.length===0&&i.push(n);const P={line:r.piece.start.line+1,column:0},O=r.piece.length-1,d=this.t(r.piece.bufferIndex,P,r.piece.end);r.piece=new b(r.piece.bufferIndex,P,r.piece.end,d,O),(0,N.updateTreeMetadata)(this,r,-1,-1),r.piece.length===0&&i.push(r);const m=this.w(`\r
`);this.S(n,m[0]);for(let g=0;g<i.length;g++)(0,N.rbDelete)(this,i[g])}Q(n,r){if(this.K()&&this.M(n)){const i=r.next();if(this.L(i)){if(n+=`
`,i.piece.length===1)(0,N.rbDelete)(this,i);else{const o=i.piece,h={line:o.start.line+1,column:0},E=o.length-1,v=this.t(o.bufferIndex,h,o.end);i.piece=new b(o.bufferIndex,h,o.end,v,E),(0,N.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(n,r){if(n===N.SENTINEL)return r(N.SENTINEL);const i=this.iterate(n.left,r);return i&&r(n)&&this.iterate(n.right,r)}R(n){if(n===N.SENTINEL)return"";const r=this.a[n.piece.bufferIndex],i=n.piece,o=this.u(i.bufferIndex,i.start),h=this.u(i.bufferIndex,i.end);return r.buffer.substring(o,h)}getPieceContent(n){const r=this.a[n.bufferIndex],i=this.u(n.bufferIndex,n.start),o=this.u(n.bufferIndex,n.end);return r.buffer.substring(i,o)}S(n,r){const i=new N.TreeNode(r,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(n.right===N.SENTINEL)n.right=i,i.parent=n;else{const h=(0,N.leftest)(n.right);h.left=i,i.parent=h}return(0,N.fixInsert)(this,i),i}T(n,r){const i=new N.TreeNode(r,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(n.left===N.SENTINEL)n.left=i,i.parent=n;else{const o=(0,N.righttest)(n.left);o.right=i,i.parent=o}return(0,N.fixInsert)(this,i),i}U(n){let r="";return this.iterate(n,i=>(r+=this.R(i),!0)),r}}t.PieceTreeBase=s}),define(te[26],ne([0,1,21,3,12,25,11,16,24,7]),function(ee,t,B,q,F,N,M,j,k,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBuffer=void 0;class w extends f.Disposable{constructor(b,R,p,u,s,c,n){super(),this.k=this.B(new B.Emitter),this.onDidChangeContent=this.k.event,this.f=R,this.j=!c,this.g=u,this.h=s,this.c=new M.PieceTreeBase(b,p,n)}equals(b){return!(b instanceof w)||this.f!==b.f||this.getEOL()!==b.getEOL()?!1:this.c.equal(b.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(b){return this.c.createSnapshot(b?this.f:"")}getOffsetAt(b,R){return this.c.getOffsetAt(b,R)}getPositionAt(b){return this.c.getPositionAt(b)}getRangeAt(b,R){const p=b+R,u=this.getPositionAt(b),s=this.getPositionAt(p);return new F.Range(u.lineNumber,u.column,s.lineNumber,s.column)}getValueInRange(b,R=0){if(b.isEmpty())return"";const p=this.l(R);return this.c.getValueInRange(b,p)}getValueLengthInRange(b,R=0){if(b.isEmpty())return 0;if(b.startLineNumber===b.endLineNumber)return b.endColumn-b.startColumn;const p=this.getOffsetAt(b.startLineNumber,b.startColumn),u=this.getOffsetAt(b.endLineNumber,b.endColumn);let s=0;const c=this.l(R),n=this.getEOL();if(c.length!==n.length){const r=c.length-n.length,i=b.endLineNumber-b.startLineNumber;s=r*i}return u-p+s}getCharacterCountInRange(b,R=0){if(this.j){let p=0;const u=b.startLineNumber,s=b.endLineNumber;for(let c=u;c<=s;c++){const n=this.getLineContent(c),r=c===u?b.startColumn-1:0,i=c===s?b.endColumn-1:n.length;for(let o=r;o<i;o++)q.isHighSurrogate(n.charCodeAt(o))?(p=p+1,o=o+1):p=p+1}return p+=this.l(R).length*(s-u),p}return this.getValueLengthInRange(b,R)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(b){return this.c.getLineContent(b)}getLineCharCode(b,R){return this.c.getLineCharCode(b,R)}getCharCode(b){return this.c.getCharCode(b)}getLineLength(b){return this.c.getLineLength(b)}getLineMinColumn(b){return 1}getLineMaxColumn(b){return this.getLineLength(b)+1}getLineFirstNonWhitespaceColumn(b){const R=q.firstNonWhitespaceIndex(this.getLineContent(b));return R===-1?0:R+1}getLineLastNonWhitespaceColumn(b){const R=q.lastNonWhitespaceIndex(this.getLineContent(b));return R===-1?0:R+2}l(b){switch(b){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(b){this.c.setEOL(b)}applyEdits(b,R,p){let u=this.g,s=this.h,c=this.j,n=!0,r=[];for(let O=0;O<b.length;O++){const d=b[O];n&&d._isTracked&&(n=!1);const m=d.range;if(d.text){let K=!0;c||(K=!q.isBasicASCII(d.text),c=K),!u&&K&&(u=q.containsRTL(d.text)),!s&&K&&(s=q.containsUnusualLineTerminators(d.text))}let g="",C=0,W=0,$=0;if(d.text){let K;[C,W,$,K]=(0,j.countEOL)(d.text);const Z=this.getEOL();K===0||K===(Z===`\r
`?2:1)?g=d.text:g=d.text.replace(/\r\n|\r|\n/g,Z)}r[O]={sortIndex:O,identifier:d.identifier||null,range:m,rangeOffset:this.getOffsetAt(m.startLineNumber,m.startColumn),rangeLength:this.getValueLengthInRange(m),text:g,eolCount:C,firstLineLength:W,lastLineLength:$,forceMoveMarkers:!!d.forceMoveMarkers,isAutoWhitespaceEdit:d.isAutoWhitespaceEdit||!1}}r.sort(w.p);let i=!1;for(let O=0,d=r.length-1;O<d;O++){const m=r[O].range.getEndPosition(),g=r[O+1].range.getStartPosition();if(g.isBeforeOrEqual(m)){if(g.isBefore(m))throw new Error("Overlapping ranges are not allowed!");i=!0}}n&&(r=this.m(r));const o=p||R?w._getInverseEditRanges(r):[],h=[];if(R)for(let O=0;O<r.length;O++){const d=r[O],m=o[O];if(d.isAutoWhitespaceEdit&&d.range.isEmpty())for(let g=m.startLineNumber;g<=m.endLineNumber;g++){let C="";g===m.startLineNumber&&(C=this.getLineContent(d.range.startLineNumber),q.firstNonWhitespaceIndex(C)!==-1)||h.push({lineNumber:g,oldContent:C})}}let E=null;if(p){let O=0;E=[];for(let d=0;d<r.length;d++){const m=r[d],g=o[d],C=this.getValueInRange(m.range),W=m.rangeOffset+O;O+=m.text.length-C.length,E[d]={sortIndex:m.sortIndex,identifier:m.identifier,range:g,text:C,textChange:new k.TextChange(m.rangeOffset,C,W,m.text)}}i||E.sort((d,m)=>d.sortIndex-m.sortIndex)}this.g=u,this.h=s,this.j=c;const v=this.n(r);let P=null;if(R&&h.length>0){h.sort((O,d)=>d.lineNumber-O.lineNumber),P=[];for(let O=0,d=h.length;O<d;O++){const m=h[O].lineNumber;if(O>0&&h[O-1].lineNumber===m)continue;const g=h[O].oldContent,C=this.getLineContent(m);C.length===0||C===g||q.firstNonWhitespaceIndex(C)!==-1||P.push(m)}}return this.k.fire(),new N.ApplyEditsResult(E,v,P)}m(b){return b.length<1e3?b:[this._toSingleEditOperation(b)]}_toSingleEditOperation(b){let R=!1;const p=b[0].range,u=b[b.length-1].range,s=new F.Range(p.startLineNumber,p.startColumn,u.endLineNumber,u.endColumn);let c=p.startLineNumber,n=p.startColumn;const r=[];for(let v=0,P=b.length;v<P;v++){const O=b[v],d=O.range;R=R||O.forceMoveMarkers,r.push(this.getValueInRange(new F.Range(c,n,d.startLineNumber,d.startColumn))),O.text.length>0&&r.push(O.text),c=d.endLineNumber,n=d.endColumn}const i=r.join(""),[o,h,E]=(0,j.countEOL)(i);return{sortIndex:0,identifier:b[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:i,eolCount:o,firstLineLength:h,lastLineLength:E,forceMoveMarkers:R,isAutoWhitespaceEdit:!1}}n(b){b.sort(w.s);const R=[];for(let p=0;p<b.length;p++){const u=b[p],s=u.range.startLineNumber,c=u.range.startColumn,n=u.range.endLineNumber,r=u.range.endColumn;if(s===n&&c===r&&u.text.length===0)continue;u.text?(this.c.delete(u.rangeOffset,u.rangeLength),this.c.insert(u.rangeOffset,u.text,!0)):this.c.delete(u.rangeOffset,u.rangeLength);const i=new F.Range(s,c,n,r);R.push({range:i,rangeLength:u.rangeLength,text:u.text,rangeOffset:u.rangeOffset,forceMoveMarkers:u.forceMoveMarkers})}return R}findMatchesLineByLine(b,R,p,u){return this.c.findMatchesLineByLine(b,R,p,u)}getPieceTree(){return this.c}static _getInverseEditRange(b,R){const p=b.startLineNumber,u=b.startColumn,[s,c,n]=(0,j.countEOL)(R);let r;if(R.length>0){const i=s+1;i===1?r=new F.Range(p,u,p,u+c):r=new F.Range(p,u,p+i-1,n+1)}else r=new F.Range(p,u,p,u);return r}static _getInverseEditRanges(b){const R=[];let p=0,u=0,s=null;for(let c=0,n=b.length;c<n;c++){const r=b[c];let i,o;s?s.range.endLineNumber===r.range.startLineNumber?(i=p,o=u+(r.range.startColumn-s.range.endColumn)):(i=p+(r.range.startLineNumber-s.range.endLineNumber),o=r.range.startColumn):(i=r.range.startLineNumber,o=r.range.startColumn);let h;if(r.text.length>0){const E=r.eolCount+1;E===1?h=new F.Range(i,o,i,o+r.firstLineLength):h=new F.Range(i,o,i+E-1,r.lastLineLength+1)}else h=new F.Range(i,o,i,o);p=h.endLineNumber,u=h.endColumn,R.push(h),s=r}return R}static p(b,R){const p=F.Range.compareRangesUsingEnds(b.range,R.range);return p===0?b.sortIndex-R.sortIndex:p}static s(b,R){const p=F.Range.compareRangesUsingEnds(b.range,R.range);return p===0?R.sortIndex-b.sortIndex:-p}}t.PieceTreeTextBuffer=w}),define(te[27],ne([0,1,3,11,26]),function(ee,t,B,q,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBufferBuilder=void 0;class N{constructor(k,f,w,A,b,R,p,u,s){this.a=k,this.b=f,this.c=w,this.d=A,this.e=b,this.f=R,this.g=p,this.h=u,this.j=s}k(k){const f=this.c+this.d+this.e,w=this.c+this.e;return f===0?k===1?`
`:`\r
`:w>f/2?`\r
`:`
`}create(k){const f=this.k(k),w=this.a;if(this.j&&(f===`\r
`&&(this.c>0||this.d>0)||f===`
`&&(this.c>0||this.e>0)))for(let b=0,R=w.length;b<R;b++){const p=w[b].buffer.replace(/\r\n|\r|\n/g,f),u=(0,q.createLineStartsFast)(p);w[b]=new q.StringBuffer(p,u)}const A=new F.PieceTreeTextBuffer(w,this.b,f,this.f,this.g,this.h,this.j);return{textBuffer:A,disposable:A}}getFirstLineText(k){return this.a[0].buffer.substr(0,k).split(/\r\n|\r|\n/)[0]}}class M{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(k){if(k.length===0)return;this.a.length===0&&B.startsWithUTF8BOM(k)&&(this.b=B.UTF8_BOM_CHARACTER,k=k.substr(1));const f=k.charCodeAt(k.length-1);f===13||f>=55296&&f<=56319?(this.m(k.substr(0,k.length-1),!1),this.c=!0,this.d=f):(this.m(k,!1),this.c=!1,this.d=f)}m(k,f){!f&&k.length===0||(this.c?this.n(String.fromCharCode(this.d)+k):this.n(k))}n(k){const f=(0,q.createLineStarts)(this.e,k);this.a.push(new q.StringBuffer(k,f.lineStarts)),this.f+=f.cr,this.g+=f.lf,this.h+=f.crlf,f.isBasicASCII||(this.l=!1,this.j||(this.j=B.containsRTL(k)),this.k||(this.k=B.containsUnusualLineTerminators(k)))}finish(k=!0){return this.o(),new N(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,k)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const k=this.a[this.a.length-1];k.buffer+=String.fromCharCode(this.d);const f=(0,q.createLineStartsFast)(k.buffer);k.lineStarts=f,this.d===13&&this.f++}}}t.PieceTreeTextBufferBuilder=M}),define(te[28],ne([29,30]),function(ee,t){return ee.create("vs/platform/contextkey/common/contextkey",t)}),define(te[31],ne([29,30]),function(ee,t){return ee.create("vs/platform/contextkey/common/scanner",t)}),define(te[32],ne([0,1,4,31]),function(ee,t,B,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scanner=t.TokenType=void 0;var F;(function(f){f[f.LParen=0]="LParen",f[f.RParen=1]="RParen",f[f.Neg=2]="Neg",f[f.Eq=3]="Eq",f[f.NotEq=4]="NotEq",f[f.Lt=5]="Lt",f[f.LtEq=6]="LtEq",f[f.Gt=7]="Gt",f[f.GtEq=8]="GtEq",f[f.RegexOp=9]="RegexOp",f[f.RegexStr=10]="RegexStr",f[f.True=11]="True",f[f.False=12]="False",f[f.In=13]="In",f[f.Not=14]="Not",f[f.And=15]="And",f[f.Or=16]="Or",f[f.Str=17]="Str",f[f.QuotedStr=18]="QuotedStr",f[f.Error=19]="Error",f[f.EOF=20]="EOF"})(F||(t.TokenType=F={}));function N(...f){switch(f.length){case 1:return(0,q.localize)(0,null,f[0]);case 2:return(0,q.localize)(1,null,f[0],f[1]);case 3:return(0,q.localize)(2,null,f[0],f[1],f[2]);default:return}}const M=(0,q.localize)(3,null),j=(0,q.localize)(4,null);class k{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(w){switch(w.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return w.isTripleEq?"===":"==";case 4:return w.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return w.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return w.lexeme;case 18:return w.lexeme;case 19:return w.lexeme;case 20:return"EOF";default:throw(0,B.illegalState)(`unhandled token type: ${JSON.stringify(w)}; have you forgotten to add a case?`)}}get errors(){return this.g}reset(w){return this.c=w,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const A=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:A})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const A=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:A})}else this.h(126)?this.k(9):this.l(N("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(N("&&"));break;case 124:this.h(124)?this.k(16):this.l(N("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(w){return this.r()||this.c.charCodeAt(this.e)!==w?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(w){this.f.push({type:w,offset:this.d})}l(w){const A=this.d,b=this.c.substring(this.d,this.e),R={type:19,offset:this.d,lexeme:b};this.g.push({offset:A,lexeme:b,additionalInfo:w}),this.f.push(R)}n(){this.m.lastIndex=this.d;const w=this.m.exec(this.c);if(w){this.e=this.d+w[0].length;const A=this.c.substring(this.d,this.e),b=k.b.get(A);b?this.k(b):this.f.push({type:17,lexeme:A,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(M);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let w=this.e,A=!1,b=!1;for(;;){if(w>=this.c.length){this.e=w,this.l(j);return}const p=this.c.charCodeAt(w);if(A)A=!1;else if(p===47&&!b){w++;break}else p===91?b=!0:p===92?A=!0:p===93&&(b=!1);w++}for(;w<this.c.length&&k.a.has(this.c.charCodeAt(w));)w++;this.e=w;const R=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:R,offset:this.d})}r(){return this.e>=this.c.length}}t.Scanner=k,k.a=new Set(["i","g","s","m","y","u"].map(f=>f.charCodeAt(0))),k.b=new Map([["not",14],["in",13],["false",12],["true",11]])}),define(te[33],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refineServiceDecorator=t.createDecorator=t.IInstantiationService=t._util=void 0;var B;(function(M){M.serviceIds=new Map,M.DI_TARGET="$di$target",M.DI_DEPENDENCIES="$di$dependencies";function j(k){return k[M.DI_DEPENDENCIES]||[]}M.getServiceDependencies=j})(B||(t._util=B={})),t.IInstantiationService=F("instantiationService");function q(M,j,k){j[B.DI_TARGET]===j?j[B.DI_DEPENDENCIES].push({id:M,index:k}):(j[B.DI_DEPENDENCIES]=[{id:M,index:k}],j[B.DI_TARGET]=j)}function F(M){if(B.serviceIds.has(M))return B.serviceIds.get(M);const j=function(k,f,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");q(j,k,w)};return j.toString=()=>M,B.serviceIds.set(M,j),j}t.createDecorator=F;function N(M){return M}t.refineServiceDecorator=N}),define(te[34],ne([0,1,2,3,32,33,28,4]),function(ee,t,B,q,F,N,M,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.implies=t.IContextKeyService=t.RawContextKey=t.ContextKeyOrExpr=t.ContextKeyAndExpr=t.ContextKeyNotRegexExpr=t.ContextKeyRegexExpr=t.ContextKeySmallerEqualsExpr=t.ContextKeySmallerExpr=t.ContextKeyGreaterEqualsExpr=t.ContextKeyGreaterExpr=t.ContextKeyNotExpr=t.ContextKeyNotEqualsExpr=t.ContextKeyNotInExpr=t.ContextKeyInExpr=t.ContextKeyEqualsExpr=t.ContextKeyDefinedExpr=t.ContextKeyTrueExpr=t.ContextKeyFalseExpr=t.expressionsAreEqualWithConstantSubstitution=t.validateWhenClauses=t.ContextKeyExpr=t.Parser=t.ContextKeyExprType=t.setConstant=void 0;const k=new Map;k.set("false",!1),k.set("true",!0),k.set("isMac",B.isMacintosh),k.set("isLinux",B.isLinux),k.set("isWindows",B.isWindows),k.set("isWeb",B.isWeb),k.set("isMacNative",B.isMacintosh&&!B.isWeb),k.set("isEdge",B.isEdge),k.set("isFirefox",B.isFirefox),k.set("isChrome",B.isChrome),k.set("isSafari",B.isSafari);function f(l,e){if(k.get(l)!==void 0)throw(0,j.illegalArgument)("contextkey.setConstant(k, v) invoked with already set constant `k`");k.set(l,e)}t.setConstant=f;const w=Object.prototype.hasOwnProperty;var A;(function(l){l[l.False=0]="False",l[l.True=1]="True",l[l.Defined=2]="Defined",l[l.Not=3]="Not",l[l.Equals=4]="Equals",l[l.NotEquals=5]="NotEquals",l[l.And=6]="And",l[l.Regex=7]="Regex",l[l.NotRegex=8]="NotRegex",l[l.Or=9]="Or",l[l.In=10]="In",l[l.NotIn=11]="NotIn",l[l.Greater=12]="Greater",l[l.GreaterEquals=13]="GreaterEquals",l[l.Smaller=14]="Smaller",l[l.SmallerEquals=15]="SmallerEquals"})(A||(t.ContextKeyExprType=A={}));const b={regexParsingWithErrorRecovery:!0},R=(0,M.localize)(0,null),p=(0,M.localize)(1,null),u=(0,M.localize)(2,null),s=(0,M.localize)(3,null),c=(0,M.localize)(4,null),n=(0,M.localize)(5,null),r=(0,M.localize)(6,null),i=(0,M.localize)(7,null);class o{get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(e=b){this.k=e,this.d=new F.Scanner,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(e){if(e===""){this.h.push({message:R,offset:0,lexeme:"",additionalInfo:p});return}this.f=this.d.reset(e).scan(),this.g=0,this.h=[];try{const a=this.l();if(!this.E()){const S=this.D(),L=S.type===17?n:void 0;throw this.h.push({message:c,offset:S.offset,lexeme:F.Scanner.getLexeme(S),additionalInfo:L}),o.c}return a}catch(a){if(a!==o.c)throw a;return}}l(){return this.m()}m(){const e=[this.o()];for(;this.y(16);){const a=this.o();e.push(a)}return e.length===1?e[0]:h.or(...e)}o(){const e=[this.s()];for(;this.y(15);){const a=this.s();e.push(a)}return e.length===1?e[0]:h.and(...e)}s(){if(this.y(2)){const e=this.D();switch(e.type){case 11:return this.z(),O.INSTANCE;case 12:return this.z(),d.INSTANCE;case 0:{this.z();const a=this.l();return this.A(1,s),a?.negate()}case 17:return this.z(),K.create(e.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",e)}}return this.t()}t(){const e=this.D();switch(e.type){case 11:return this.z(),h.true();case 12:return this.z(),h.false();case 0:{this.z();const a=this.l();return this.A(1,s),a}case 17:{const a=e.lexeme;if(this.z(),this.y(9)){const L=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),L.type!==10)throw this.B("REGEX",L);const x=L.lexeme,V=x.lastIndexOf("/"),X=V===x.length-1?void 0:this.w(x.substring(V+1));let se;try{se=new RegExp(x.substring(1,V),X)}catch{throw this.B("REGEX",L)}return ae.create(a,se)}switch(L.type){case 10:case 19:{const x=[L.lexeme];this.z();let V=this.D(),X=0;for(let le=0;le<L.lexeme.length;le++)L.lexeme.charCodeAt(le)===40?X++:L.lexeme.charCodeAt(le)===41&&X--;for(;!this.E()&&V.type!==15&&V.type!==16;){switch(V.type){case 0:X++;break;case 1:X--;break;case 10:case 18:for(let le=0;le<V.lexeme.length;le++)V.lexeme.charCodeAt(le)===40?X++:L.lexeme.charCodeAt(le)===41&&X--}if(X<0)break;x.push(F.Scanner.getLexeme(V)),this.z(),V=this.D()}const se=x.join(""),oe=se.lastIndexOf("/"),ue=oe===se.length-1?void 0:this.w(se.substring(oe+1));let ce;try{ce=new RegExp(se.substring(1,oe),ue)}catch{throw this.B("REGEX",L)}return h.regex(a,ce)}case 18:{const x=L.lexeme;this.z();let V=null;if(!(0,q.isFalsyOrWhitespace)(x)){const X=x.indexOf("/"),se=x.lastIndexOf("/");if(X!==se&&X>=0){const oe=x.slice(X+1,se),ue=x[se+1]==="i"?"i":"";try{V=new RegExp(oe,ue)}catch{throw this.B("REGEX",L)}}}if(V===null)throw this.B("REGEX",L);return ae.create(a,V)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,u);const L=this.u();return h.notIn(a,L)}switch(this.D().type){case 3:{this.z();const L=this.u();if(this.x().type===18)return h.equals(a,L);switch(L){case"true":return h.has(a);case"false":return h.not(a);default:return h.equals(a,L)}}case 4:{this.z();const L=this.u();if(this.x().type===18)return h.notEquals(a,L);switch(L){case"true":return h.not(a);case"false":return h.has(a);default:return h.notEquals(a,L)}}case 5:return this.z(),ie.create(a,this.u());case 6:return this.z(),re.create(a,this.u());case 7:return this.z(),Y.create(a,this.u());case 8:return this.z(),J.create(a,this.u());case 13:return this.z(),h.in(a,this.u());default:return h.has(a)}}case 20:throw this.h.push({message:r,offset:e.offset,lexeme:"",additionalInfo:i}),o.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const e=this.D();switch(e.type){case 17:case 18:return this.z(),e.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(e){return e.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(e){return this.C(e)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(e,a){if(this.C(e))return this.z();throw this.B(a,this.D())}B(e,a,S){const L=(0,M.localize)(8,null,e,F.Scanner.getLexeme(a)),x=a.offset,V=F.Scanner.getLexeme(a);return this.h.push({message:L,offset:x,lexeme:V,additionalInfo:S}),o.c}C(e){return this.D().type===e}D(){return this.f[this.g]}E(){return this.D().type===20}}t.Parser=o,o.c=new Error;class h{static false(){return O.INSTANCE}static true(){return d.INSTANCE}static has(e){return m.create(e)}static equals(e,a){return g.create(e,a)}static notEquals(e,a){return $.create(e,a)}static regex(e,a){return ae.create(e,a)}static in(e,a){return C.create(e,a)}static notIn(e,a){return W.create(e,a)}static not(e){return K.create(e)}static and(...e){return D.create(e,null,!0)}static or(...e){return U.create(e,null,!0)}static greater(e,a){return Y.create(e,a)}static greaterEquals(e,a){return J.create(e,a)}static smaller(e,a){return ie.create(e,a)}static smallerEquals(e,a){return re.create(e,a)}static deserialize(e){return e==null?void 0:this.c.parse(e)}}t.ContextKeyExpr=h,h.c=new o({regexParsingWithErrorRecovery:!1});function E(l){const e=new o({regexParsingWithErrorRecovery:!1});return l.map(a=>(e.parse(a),e.lexingErrors.length>0?e.lexingErrors.map(S=>({errorMessage:S.additionalInfo?(0,M.localize)(9,null,S.additionalInfo):(0,M.localize)(10,null),offset:S.offset,length:S.lexeme.length})):e.parsingErrors.length>0?e.parsingErrors.map(S=>({errorMessage:S.additionalInfo?`${S.message}. ${S.additionalInfo}`:S.message,offset:S.offset,length:S.lexeme.length})):[]))}t.validateWhenClauses=E;function v(l,e){const a=l?l.substituteConstants():void 0,S=e?e.substituteConstants():void 0;return!a&&!S?!0:!a||!S?!1:a.equals(S)}t.expressionsAreEqualWithConstantSubstitution=v;function P(l,e){return l.cmp(e)}class O{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return d.INSTANCE}}t.ContextKeyFalseExpr=O,O.INSTANCE=new O;class d{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return O.INSTANCE}}t.ContextKeyTrueExpr=d,d.INSTANCE=new d;class m{static create(e,a=null){const S=k.get(e);return typeof S=="boolean"?S?d.INSTANCE:O.INSTANCE:new m(e,a)}constructor(e,a){this.key=e,this.c=a,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:G(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=k.get(this.key);return typeof e=="boolean"?e?d.INSTANCE:O.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.c||(this.c=K.create(this.key,this)),this.c}}t.ContextKeyDefinedExpr=m;class g{static create(e,a,S=null){if(typeof a=="boolean")return a?m.create(e,S):K.create(e,S);const L=k.get(e);return typeof L=="boolean"?a===(L?"true":"false")?d.INSTANCE:O.INSTANCE:new g(e,a,S)}constructor(e,a,S){this.c=e,this.d=a,this.f=S,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:z(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){const e=k.get(this.c);if(typeof e=="boolean"){const a=e?"true":"false";return this.d===a?d.INSTANCE:O.INSTANCE}return this}evaluate(e){return e.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(e){return e.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=$.create(this.c,this.d,this)),this.f}}t.ContextKeyEqualsExpr=g;class C{static create(e,a){return new C(e,a)}constructor(e,a){this.d=e,this.f=a,this.type=10,this.c=null}cmp(e){return e.type!==this.type?this.type-e.type:z(this.d,this.f,e.d,e.f)}equals(e){return e.type===this.type?this.d===e.d&&this.f===e.f:!1}substituteConstants(){return this}evaluate(e){const a=e.getValue(this.f),S=e.getValue(this.d);return Array.isArray(a)?a.includes(S):typeof S=="string"&&typeof a=="object"&&a!==null?w.call(a,S):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(e){return e.mapIn(this.d,this.f)}negate(){return this.c||(this.c=W.create(this.d,this.f)),this.c}}t.ContextKeyInExpr=C;class W{static create(e,a){return new W(e,a)}constructor(e,a){this.d=e,this.f=a,this.type=11,this.c=C.create(e,a)}cmp(e){return e.type!==this.type?this.type-e.type:this.c.cmp(e.c)}equals(e){return e.type===this.type?this.c.equals(e.c):!1}substituteConstants(){return this}evaluate(e){return!this.c.evaluate(e)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(e){return e.mapNotIn(this.d,this.f)}negate(){return this.c}}t.ContextKeyNotInExpr=W;class ${static create(e,a,S=null){if(typeof a=="boolean")return a?K.create(e,S):m.create(e,S);const L=k.get(e);return typeof L=="boolean"?a===(L?"true":"false")?O.INSTANCE:d.INSTANCE:new $(e,a,S)}constructor(e,a,S){this.c=e,this.d=a,this.f=S,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:z(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){const e=k.get(this.c);if(typeof e=="boolean"){const a=e?"true":"false";return this.d===a?O.INSTANCE:d.INSTANCE}return this}evaluate(e){return e.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(e){return e.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=g.create(this.c,this.d,this)),this.f}}t.ContextKeyNotEqualsExpr=$;class K{static create(e,a=null){const S=k.get(e);return typeof S=="boolean"?S?O.INSTANCE:d.INSTANCE:new K(e,a)}constructor(e,a){this.c=e,this.d=a,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:G(this.c,e.c)}equals(e){return e.type===this.type?this.c===e.c:!1}substituteConstants(){const e=k.get(this.c);return typeof e=="boolean"?e?O.INSTANCE:d.INSTANCE:this}evaluate(e){return!e.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(e){return e.mapNot(this.c)}negate(){return this.d||(this.d=m.create(this.c,this)),this.d}}t.ContextKeyNotExpr=K;function Z(l,e){if(typeof l=="string"){const a=parseFloat(l);isNaN(a)||(l=a)}return typeof l=="string"||typeof l=="number"?e(l):O.INSTANCE}class Y{static create(e,a,S=null){return Z(a,L=>new Y(e,L,S))}constructor(e,a,S){this.c=e,this.d=a,this.f=S,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:z(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(e){return e.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=re.create(this.c,this.d,this)),this.f}}t.ContextKeyGreaterExpr=Y;class J{static create(e,a,S=null){return Z(a,L=>new J(e,L,S))}constructor(e,a,S){this.c=e,this.d=a,this.f=S,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:z(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(e){return e.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=ie.create(this.c,this.d,this)),this.f}}t.ContextKeyGreaterEqualsExpr=J;class ie{static create(e,a,S=null){return Z(a,L=>new ie(e,L,S))}constructor(e,a,S){this.c=e,this.d=a,this.f=S,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:z(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(e){return e.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=J.create(this.c,this.d,this)),this.f}}t.ContextKeySmallerExpr=ie;class re{static create(e,a,S=null){return Z(a,L=>new re(e,L,S))}constructor(e,a,S){this.c=e,this.d=a,this.f=S,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:z(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(e){return e.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Y.create(this.c,this.d,this)),this.f}}t.ContextKeySmallerEqualsExpr=re;class ae{static create(e,a){return new ae(e,a)}constructor(e,a){this.d=e,this.f=a,this.type=7,this.c=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.d<e.d)return-1;if(this.d>e.d)return 1;const a=this.f?this.f.source:"",S=e.f?e.f.source:"";return a<S?-1:a>S?1:0}equals(e){if(e.type===this.type){const a=this.f?this.f.source:"",S=e.f?e.f.source:"";return this.d===e.d&&a===S}return!1}substituteConstants(){return this}evaluate(e){const a=e.getValue(this.d);return this.f?this.f.test(a):!1}serialize(){const e=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${e}`}keys(){return[this.d]}map(e){return e.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=I.create(this)),this.c}}t.ContextKeyRegexExpr=ae;class I{static create(e){return new I(e)}constructor(e){this.c=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this.c.cmp(e.c)}equals(e){return e.type===this.type?this.c.equals(e.c):!1}substituteConstants(){return this}evaluate(e){return!this.c.evaluate(e)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(e){return new I(this.c.map(e))}negate(){return this.c}}t.ContextKeyNotRegexExpr=I;function H(l){let e=null;for(let a=0,S=l.length;a<S;a++){const L=l[a].substituteConstants();if(l[a]!==L&&e===null){e=[];for(let x=0;x<a;x++)e[x]=l[x]}e!==null&&(e[a]=L)}return e===null?l:e}class D{static create(e,a,S){return D.d(e,a,S)}constructor(e,a){this.expr=e,this.c=a,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let a=0,S=this.expr.length;a<S;a++){const L=P(this.expr[a],e.expr[a]);if(L!==0)return L}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let a=0,S=this.expr.length;a<S;a++)if(!this.expr[a].equals(e.expr[a]))return!1;return!0}return!1}substituteConstants(){const e=H(this.expr);return e===this.expr?this:D.create(e,this.c,!1)}evaluate(e){for(let a=0,S=this.expr.length;a<S;a++)if(!this.expr[a].evaluate(e))return!1;return!0}static d(e,a,S){const L=[];let x=!1;for(const V of e)if(V){if(V.type===1){x=!0;continue}if(V.type===0)return O.INSTANCE;if(V.type===6){L.push(...V.expr);continue}L.push(V)}if(L.length===0&&x)return d.INSTANCE;if(L.length!==0){if(L.length===1)return L[0];L.sort(P);for(let V=1;V<L.length;V++)L[V-1].equals(L[V])&&(L.splice(V,1),V--);if(L.length===1)return L[0];for(;L.length>1;){const V=L[L.length-1];if(V.type!==9)break;L.pop();const X=L.pop(),se=L.length===0,oe=U.create(V.expr.map(ue=>D.create([ue,X],null,S)),null,se);oe&&(L.push(oe),L.sort(P))}if(L.length===1)return L[0];if(S){for(let V=0;V<L.length;V++)for(let X=V+1;X<L.length;X++)if(L[V].negate().equals(L[X]))return O.INSTANCE;if(L.length===1)return L[0]}return new D(L,a)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const a of this.expr)e.push(...a.keys());return e}map(e){return new D(this.expr.map(a=>a.map(e)),null)}negate(){if(!this.c){const e=[];for(const a of this.expr)e.push(a.negate());this.c=U.create(e,this,!0)}return this.c}}t.ContextKeyAndExpr=D;class U{static create(e,a,S){return U.d(e,a,S)}constructor(e,a){this.expr=e,this.c=a,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let a=0,S=this.expr.length;a<S;a++){const L=P(this.expr[a],e.expr[a]);if(L!==0)return L}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let a=0,S=this.expr.length;a<S;a++)if(!this.expr[a].equals(e.expr[a]))return!1;return!0}return!1}substituteConstants(){const e=H(this.expr);return e===this.expr?this:U.create(e,this.c,!1)}evaluate(e){for(let a=0,S=this.expr.length;a<S;a++)if(this.expr[a].evaluate(e))return!0;return!1}static d(e,a,S){let L=[],x=!1;if(e){for(let V=0,X=e.length;V<X;V++){const se=e[V];if(se){if(se.type===0){x=!0;continue}if(se.type===1)return d.INSTANCE;if(se.type===9){L=L.concat(se.expr);continue}L.push(se)}}if(L.length===0&&x)return O.INSTANCE;L.sort(P)}if(L.length!==0){if(L.length===1)return L[0];for(let V=1;V<L.length;V++)L[V-1].equals(L[V])&&(L.splice(V,1),V--);if(L.length===1)return L[0];if(S){for(let V=0;V<L.length;V++)for(let X=V+1;X<L.length;X++)if(L[V].negate().equals(L[X]))return d.INSTANCE;if(L.length===1)return L[0]}return new U(L,a)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const a of this.expr)e.push(...a.keys());return e}map(e){return new U(this.expr.map(a=>a.map(e)),null)}negate(){if(!this.c){const e=[];for(const a of this.expr)e.push(a.negate());for(;e.length>1;){const a=e.shift(),S=e.shift(),L=[];for(const x of y(a))for(const V of y(S))L.push(D.create([x,V],null,!1));e.unshift(U.create(L,null,!1))}this.c=U.create(e,this,!0)}return this.c}}t.ContextKeyOrExpr=U;class T extends m{static all(){return T.d.values()}constructor(e,a,S){super(e,null),this.f=a,typeof S=="object"?T.d.push({...S,key:e}):S!==!0&&T.d.push({key:e,description:S,type:a!=null?typeof a:void 0})}bindTo(e){return e.createKey(this.key,this.f)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return g.create(this.key,e)}notEqualsTo(e){return $.create(this.key,e)}}t.RawContextKey=T,T.d=[],t.IContextKeyService=(0,N.createDecorator)("contextKeyService");function G(l,e){return l<e?-1:l>e?1:0}function z(l,e,a,S){return l<a?-1:l>a?1:e<S?-1:e>S?1:0}function Q(l,e){if(l.type===0||e.type===1)return!0;if(l.type===9)return e.type===9?_(l.expr,e.expr):!1;if(e.type===9){for(const a of e.expr)if(Q(l,a))return!0;return!1}if(l.type===6){if(e.type===6)return _(e.expr,l.expr);for(const a of l.expr)if(Q(a,e))return!0;return!1}return l.equals(e)}t.implies=Q;function _(l,e){let a=0,S=0;for(;a<l.length&&S<e.length;){const L=l[a].cmp(e[S]);if(L<0)return!1;L===0&&a++,S++}return a===l.length}function y(l){return l.type===9?l.expr:[l]}}),define(te[35],ne([0,1,6,22,41,18,9,5,2,34]),function(ee,t,B,q,F,N,M,j,k,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressOutputItemStreams=t.isTextStreamMime=t.NotebookWorkingCopyTypeIdentifier=t.CellStatusbarAlignment=t.NotebookSetting=t.notebookDocumentFilterMatch=t.isDocumentExcludePattern=t.NotebookEditorPriority=t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=t.diff=t.MimeTypeDisplayOrder=t.CellUri=t.CellEditType=t.SelectionStateType=t.NotebookCellsChangeType=t.RendererMessagingSpec=t.NotebookRendererMatch=t.NotebookExecutionState=t.NotebookCellExecutionState=t.NotebookRunState=t.RENDERER_NOT_AVAILABLE=t.RENDERER_EQUIVALENT_EXTENSIONS=t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=t.NOTEBOOK_DISPLAY_ORDER=t.CellKind=t.INTERACTIVE_WINDOW_EDITOR_ID=t.NOTEBOOK_DIFF_EDITOR_ID=t.NOTEBOOK_EDITOR_ID=void 0,t.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",t.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",t.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var w;(function(I){I[I.Markup=1]="Markup",I[I.Code=2]="Code"})(w||(t.CellKind=w={})),t.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",N.Mimes.latex,N.Mimes.markdown,"image/png","image/jpeg",N.Mimes.text],t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[N.Mimes.latex,N.Mimes.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",N.Mimes.text],t.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),t.RENDERER_NOT_AVAILABLE="_notAvailable";var A;(function(I){I[I.Running=1]="Running",I[I.Idle=2]="Idle"})(A||(t.NotebookRunState=A={}));var b;(function(I){I[I.Unconfirmed=1]="Unconfirmed",I[I.Pending=2]="Pending",I[I.Executing=3]="Executing"})(b||(t.NotebookCellExecutionState=b={}));var R;(function(I){I[I.Unconfirmed=1]="Unconfirmed",I[I.Pending=2]="Pending",I[I.Executing=3]="Executing"})(R||(t.NotebookExecutionState=R={}));var p;(function(I){I[I.WithHardKernelDependency=0]="WithHardKernelDependency",I[I.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",I[I.Pure=2]="Pure",I[I.Never=3]="Never"})(p||(t.NotebookRendererMatch=p={}));var u;(function(I){I.Always="always",I.Never="never",I.Optional="optional"})(u||(t.RendererMessagingSpec=u={}));var s;(function(I){I[I.ModelChange=1]="ModelChange",I[I.Move=2]="Move",I[I.ChangeCellLanguage=5]="ChangeCellLanguage",I[I.Initialize=6]="Initialize",I[I.ChangeCellMetadata=7]="ChangeCellMetadata",I[I.Output=8]="Output",I[I.OutputItem=9]="OutputItem",I[I.ChangeCellContent=10]="ChangeCellContent",I[I.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",I[I.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",I[I.ChangeCellMime=13]="ChangeCellMime",I[I.Unknown=100]="Unknown"})(s||(t.NotebookCellsChangeType=s={}));var c;(function(I){I[I.Handle=0]="Handle",I[I.Index=1]="Index"})(c||(t.SelectionStateType=c={}));var n;(function(I){I[I.Replace=1]="Replace",I[I.Output=2]="Output",I[I.Metadata=3]="Metadata",I[I.CellLanguage=4]="CellLanguage",I[I.DocumentMetadata=5]="DocumentMetadata",I[I.Move=6]="Move",I[I.OutputItems=7]="OutputItems",I[I.PartialMetadata=8]="PartialMetadata",I[I.PartialInternalMetadata=9]="PartialInternalMetadata"})(n||(t.CellEditType=n={}));var r;(function(I){I.scheme=M.Schemas.vscodeNotebookCell;const H=["W","X","Y","Z","a","b","c","d","e","f"],D=new RegExp(`^[${H.join("")}]+`),U=7;function T(l,e){const a=e.toString(U),L=`${a.length<H.length?H[a.length-1]:"z"}${a}s${(0,B.encodeBase64)(B.VSBuffer.fromString(l.scheme),!0,!0)}`;return l.with({scheme:I.scheme,fragment:L})}I.generate=T;function G(l){if(l.scheme!==I.scheme)return;const e=l.fragment.indexOf("s");if(e<0)return;const a=parseInt(l.fragment.substring(0,e).replace(D,""),U),S=(0,B.decodeBase64)(l.fragment.substring(e+1)).toString();if(!isNaN(a))return{handle:a,notebook:l.with({scheme:S,fragment:null})}}I.parse=G;function z(l,e){return l.with({scheme:M.Schemas.vscodeNotebookCellOutput,fragment:`op${e??""},${l.scheme!==M.Schemas.file?l.scheme:""}`})}I.generateCellOutputUri=z;function Q(l){if(l.scheme!==M.Schemas.vscodeNotebookCellOutput)return;const e=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(l.fragment);if(!e)return;const a=e[1]&&e[1]!==""?e[1]:void 0,S=e[2];return{outputId:a,notebook:l.with({scheme:S||M.Schemas.file,fragment:null})}}I.parseCellOutputUri=Q;function _(l,e,a){return I.generate(l,e).with({scheme:a})}I.generateCellPropertyUri=_;function y(l,e){if(l.scheme===e)return I.parse(l.with({scheme:I.scheme}))}I.parseCellPropertyUri=y})(r||(t.CellUri=r={}));const i=I=>k.isWindows?I.replace(/\//g,"\\"):I;class o{constructor(H=[],D=t.NOTEBOOK_DISPLAY_ORDER){this.e=D,this.d=[...new Set(H)].map(U=>({pattern:U,matches:q.parse(i(U))}))}sort(H){const D=new Map(F.Iterable.map(H,T=>[T,i(T)]));let U=[];for(const{matches:T}of this.d)for(const[G,z]of D)if(T(z)){U.push(G),D.delete(G);break}return D.size&&(U=U.concat([...D.keys()].sort((T,G)=>this.e.indexOf(T)-this.e.indexOf(G)))),U}prioritize(H,D){const U=this.f(H);if(U===-1){this.d.unshift({pattern:H,matches:q.parse(i(H))});return}const T=new Set(D.map(z=>this.f(z,U)));T.delete(-1);const G=Array.from(T).sort();this.d.splice(U+1,0,...G.map(z=>this.d[z]));for(let z=G.length-1;z>=0;z--)this.d.splice(G[z],1)}toArray(){return this.d.map(H=>H.pattern)}f(H,D=this.d.length){const U=i(H);for(let T=0;T<D;T++)if(this.d[T].matches(U))return T;return-1}}t.MimeTypeDisplayOrder=o;function h(I,H,D,U=(T,G)=>T===G){const T=[];function G(_,y,l){if(y===0&&l.length===0)return;const e=T[T.length-1];e&&e.start+e.deleteCount===_?(e.deleteCount+=y,e.toInsert.push(...l)):T.push({start:_,deleteCount:y,toInsert:l})}let z=0,Q=0;for(;;){if(z===I.length){G(z,0,H.slice(Q));break}if(Q===H.length){G(z,I.length-z,[]);break}const _=I[z],y=H[Q];if(U(_,y)){z+=1,Q+=1;continue}D(y)?(G(z,1,[]),z+=1):(G(z,0,[y]),Q+=1)}return T}t.diff=h,t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new f.RawContextKey("notebookEditorCursorAtBoundary","none");var E;(function(I){I.default="default",I.option="option"})(E||(t.NotebookEditorPriority=E={}));function v(I){const H=I;return!!((typeof H.include=="string"||q.isRelativePattern(H.include))&&(typeof H.exclude=="string"||q.isRelativePattern(H.exclude)))}t.isDocumentExcludePattern=v;function P(I,H,D){if(Array.isArray(I.viewType)&&I.viewType.indexOf(H)>=0||I.viewType===H)return!0;if(I.filenamePattern){const U=v(I.filenamePattern)?I.filenamePattern.include:I.filenamePattern,T=v(I.filenamePattern)?I.filenamePattern.exclude:void 0;if(q.match(U,(0,j.basename)(D.fsPath).toLowerCase()))return!(T&&q.match(T,(0,j.basename)(D.fsPath).toLowerCase()))}return!1}t.notebookDocumentFilterMatch=P,t.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",diffOverviewRuler:"notebook.diff.overviewRuler",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputScrollingDeprecated:"notebook.experimental.outputScrolling",outputScrolling:"notebook.output.scrolling",textOutputLineLimit:"notebook.output.textLineLimit",formatOnSave:"notebook.formatOnSave.enabled",codeActionsOnSave:"notebook.experimental.codeActionsOnSave",outputWordWrap:"notebook.output.wordWrap",outputLineHeightDeprecated:"notebook.outputLineHeight",outputLineHeight:"notebook.output.lineHeight",outputFontSizeDeprecated:"notebook.outputFontSize",outputFontSize:"notebook.output.fontSize",outputFontFamilyDeprecated:"notebook.outputFontFamily",outputFontFamily:"notebook.output.fontFamily",findScope:"notebook.find.scope",logging:"notebook.logging",confirmDeleteRunningCell:"notebook.confirmDeleteRunningCell"};var O;(function(I){I[I.Left=1]="Left",I[I.Right=2]="Right"})(O||(t.CellStatusbarAlignment=O={}));class d{static create(H){return`${d.d}${H}`}static parse(H){if(H.startsWith(d.d))return H.substring(d.d.length)}}t.NotebookWorkingCopyTypeIdentifier=d,d.d="notebook/";function m(I){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(I)}t.isTextStreamMime=m;const g=new TextDecoder;function C(I){const H=[];let D=!1;for(const U of I)(H.length===0||D)&&(H.push(U),D=!0);return Z(H),ae(B.VSBuffer.concat(H.map(U=>B.VSBuffer.wrap(U))))}t.compressOutputItemStreams=C;const W=`${String.fromCharCode(27)}[A`,$=W.split("").map(I=>I.charCodeAt(0)),K=10;function Z(I){I.forEach((H,D)=>{if(D===0||H.length<W.length)return;const U=I[D-1],T=H.subarray(0,W.length);if(T[0]===$[0]&&T[1]===$[1]&&T[2]===$[2]){const G=U.lastIndexOf(K);if(G===-1)return;I[D-1]=U.subarray(0,G),I[D]=H.subarray(W.length)}})}function Y(I){let H=I;do I=H,H=I.replace(/[^\n]\x08/gm,"");while(H.length<I.length);return I}function J(I){for(I=I.replace(/\r+\n/gm,`
`);I.search(/\r[^$]/g)>-1;){const H=I.match(/^(.*)\r+/m)[1];let D=I.match(/\r+(.*)$/m)[1];D=D+H.slice(D.length,H.length),I=I.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,D)}return I}const ie="\b".charCodeAt(0),re="\r".charCodeAt(0);function ae(I){return!I.buffer.includes(ie)&&!I.buffer.includes(re)?I:B.VSBuffer.fromString(J(Y(g.decode(I.buffer))))}}),define(te[42],ne([0,1,43,44,10,27,35,12]),function(ee,t,B,q,F,N,M,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.NotebookEditorSimpleWorker=void 0;function k(p){let u=(0,q.numberHash)(104579,0);for(let s=0;s<p.buffer.length;s++)u=(0,q.doHash)(p.buffer[s],u);return u}class f{get textBuffer(){if(this.a)return this.a;const u=new N.PieceTreeTextBufferBuilder;u.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const s=u.finish(!0);return this.a=s.create(1).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,q.hash)(this.getValue())),this.b}constructor(u,s,c,n,r,i,o){this.handle=u,this.d=s,this.language=c,this.cellKind=n,this.outputs=r,this.metadata=i,this.internalMetadata=o,this.b=null,this.c=null}getFullModelRange(){const u=this.textBuffer.getLineCount();return new j.Range(1,1,u,this.textBuffer.getLineLength(u)+1)}getValue(){const u=this.getFullModelRange();return this.textBuffer.getValueInRange(u,1)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,q.hash)([(0,q.hash)(this.language),(0,q.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(u=>({outputs:u.outputs.map(s=>({mime:s.mime,data:k(s.data)})),metadata:u.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,q.hash)([(0,q.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class w{constructor(u,s,c){this.uri=u,this.cells=s,this.metadata=c}acceptModelChanged(u){u.rawEvents.forEach(s=>{if(s.kind===M.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===M.NotebookCellsChangeType.Move){const c=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...c)}else if(s.kind===M.NotebookCellsChangeType.Output){const c=this.cells[s.index];c.outputs=s.outputs}else if(s.kind===M.NotebookCellsChangeType.ChangeCellLanguage){this.a(s.index);const c=this.cells[s.index];c.language=s.language}else if(s.kind===M.NotebookCellsChangeType.ChangeCellMetadata){this.a(s.index);const c=this.cells[s.index];c.metadata=s.metadata}else if(s.kind===M.NotebookCellsChangeType.ChangeCellInternalMetadata){this.a(s.index);const c=this.cells[s.index];c.internalMetadata=s.internalMetadata}})}a(u){if(u<0||u>=this.cells.length)throw new Error(`Illegal index ${u}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(u){u.reverse().forEach(s=>{const n=s[2].map(r=>new f(r.handle,r.source,r.language,r.cellKind,r.outputs,r.metadata));this.cells.splice(s[0],s[1],...n)})}}class A{constructor(u){this.textModel=u}getElements(){const u=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)u[s]=this.textModel.cells[s].getComparisonValue();return u}getCellHash(u){const s=Array.isArray(u.source)?u.source.join(`
`):u.source;return(0,q.hash)([(0,q.hash)(s),u.metadata])}}class b{constructor(){this.a=Object.create(null)}dispose(){}acceptNewModel(u,s){this.a[u]=new w(F.URI.parse(u),s.cells.map(c=>new f(c.handle,c.source,c.language,c.cellKind,c.outputs,c.metadata)),s.metadata)}acceptModelChanged(u,s){this.a[u]?.acceptModelChanged(s)}acceptRemovedModel(u){this.a[u]&&delete this.a[u]}computeDiff(u,s){const c=this.b(u),n=this.b(s);return{cellsDiff:new B.LcsDiff(new A(c),new A(n)).ComputeDiff(!1)}}b(u){return this.a[u]}}t.NotebookEditorSimpleWorker=b;function R(p){return new b}t.create=R})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/6a995c4f4cc2ced6e3237749973982e751cb0bf9/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map

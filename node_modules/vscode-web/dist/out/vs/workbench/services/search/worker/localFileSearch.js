"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(x){for(var e=[],I=0,O=x.length;I<O;I++)e[I]=ie[x[I]];return e};define(ie[10],se([0,1]),function(x,e){"use strict";var I,O,A;Object.defineProperty(e,"__esModule",{value:!0}),e.CounterSet=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function T(o,n,u){let m=o.get(n);return m===void 0&&(m=u,o.set(n,m)),m}e.getOrSet=T;function y(o){const n=[];return o.forEach((u,m)=>{n.push(`${m} => ${u}`)}),`Map(${o.size}) {${n.join(", ")}}`}e.mapToString=y;function k(o){const n=[];return o.forEach(u=>{n.push(u)}),`Set(${o.size}) {${n.join(", ")}}`}e.setToString=k;class B{constructor(n,u){this.uri=n,this.value=u}}class v{constructor(n,u){this[I]="ResourceMap",n instanceof v?(this.b=new Map(n.b),this.c=u??v.a):(this.b=new Map,this.c=n??v.a)}set(n,u){return this.b.set(this.c(n),new B(n,u)),this}get(n){return this.b.get(this.c(n))?.value}has(n){return this.b.has(this.c(n))}get size(){return this.b.size}clear(){this.b.clear()}delete(n){return this.b.delete(this.c(n))}forEach(n,u){typeof u<"u"&&(n=n.bind(u));for(const[m,c]of this.b)n(c.value,c.uri,this)}*values(){for(const n of this.b.values())yield n.value}*keys(){for(const n of this.b.values())yield n.uri}*entries(){for(const n of this.b.values())yield[n.uri,n.value]}*[(I=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.b)yield[n.uri,n.value]}}e.ResourceMap=v,v.a=o=>o.toString();class w{constructor(n,u){this[O]="ResourceSet",!n||typeof n=="function"?this.a=new v(n):(this.a=new v(u),n.forEach(this.add,this))}get size(){return this.a.size}add(n){return this.a.set(n,n),this}clear(){this.a.clear()}delete(n){return this.a.delete(n)}forEach(n,u){this.a.forEach((m,c)=>n.call(u,c,c,this))}has(n){return this.a.has(n)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=w;var M;(function(o){o[o.None=0]="None",o[o.AsOld=1]="AsOld",o[o.AsNew=2]="AsNew"})(M||(e.Touch=M={}));class N{constructor(){this[A]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(n){return this.a.has(n)}get(n,u=0){const m=this.a.get(n);if(m)return u!==0&&this.j(m,u),m.value}set(n,u,m=0){let c=this.a.get(n);if(c)c.value=u,m!==0&&this.j(c,m);else{switch(c={key:n,value:u,next:void 0,previous:void 0},m){case 0:this.h(c);break;case 1:this.g(c);break;case 2:this.h(c);break;default:this.h(c);break}this.a.set(n,c),this.d++}return this}delete(n){return!!this.remove(n)}remove(n){const u=this.a.get(n);if(u)return this.a.delete(n),this.i(u),this.d--,u.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const n=this.b;return this.a.delete(n.key),this.i(n),this.d--,n.value}forEach(n,u){const m=this.e;let c=this.b;for(;c;){if(u?n.bind(u)(c.value,c.key,this):n(c.value,c.key,this),this.e!==m)throw new Error("LinkedMap got modified during iteration.");c=c.next}}keys(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const F={value:m.key,done:!1};return m=m.next,F}else return{value:void 0,done:!0}}};return c}values(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const F={value:m.value,done:!1};return m=m.next,F}else return{value:void 0,done:!0}}};return c}entries(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const F={value:[m.key,m.value],done:!1};return m=m.next,F}else return{value:void 0,done:!0}}};return c}[(A=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(n){if(n>=this.size)return;if(n===0){this.clear();return}let u=this.b,m=this.size;for(;u&&m>n;)this.a.delete(u.key),u=u.next,m--;this.b=u,this.d=m,u&&(u.previous=void 0),this.e++}g(n){if(!this.b&&!this.c)this.c=n;else if(this.b)n.next=this.b,this.b.previous=n;else throw new Error("Invalid list");this.b=n,this.e++}h(n){if(!this.b&&!this.c)this.b=n;else if(this.c)n.previous=this.c,this.c.next=n;else throw new Error("Invalid list");this.c=n,this.e++}i(n){if(n===this.b&&n===this.c)this.b=void 0,this.c=void 0;else if(n===this.b){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this.b=n.next}else if(n===this.c){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this.c=n.previous}else{const u=n.next,m=n.previous;if(!u||!m)throw new Error("Invalid list");u.previous=m,m.next=u}n.next=void 0,n.previous=void 0,this.e++}j(n,u){if(!this.b||!this.c)throw new Error("Invalid list");if(!(u!==1&&u!==2)){if(u===1){if(n===this.b)return;const m=n.next,c=n.previous;n===this.c?(c.next=void 0,this.c=c):(m.previous=c,c.next=m),n.previous=void 0,n.next=this.b,this.b.previous=n,this.b=n,this.e++}else if(u===2){if(n===this.c)return;const m=n.next,c=n.previous;n===this.b?(m.previous=void 0,this.b=m):(m.previous=c,c.next=m),n.next=void 0,n.previous=this.c,this.c.next=n,this.c=n,this.e++}}}toJSON(){const n=[];return this.forEach((u,m)=>{n.push([m,u])}),n}fromJSON(n){this.clear();for(const[u,m]of n)this.set(u,m)}}e.LinkedMap=N;class D extends N{constructor(n,u=1){super(),this.k=n,this.l=Math.min(Math.max(0,u),1)}get limit(){return this.k}set limit(n){this.k=n,this.m()}get ratio(){return this.l}set ratio(n){this.l=Math.min(Math.max(0,n),1),this.m()}get(n,u=2){return super.get(n,u)}peek(n){return super.get(n,0)}set(n,u){return super.set(n,u,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=D;class s{constructor(){this.a=new Map}add(n){return this.a.set(n,(this.a.get(n)||0)+1),this}delete(n){let u=this.a.get(n)||0;return u===0?!1:(u--,u===0?this.a.delete(n):this.a.set(n,u),!0)}has(n){return this.a.has(n)}}e.CounterSet=s}),define(ie[11],se([0,1]),function(x,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ie[5],se([0,1,3,2,4,17]),function(x,e,I,O,A,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function y(l){return l===47||l===92}e.isPathSeparator=y;function k(l){return l.replace(/[\\/]/g,I.posix.sep)}e.toSlashes=k;function B(l){return l.indexOf("/")===-1&&(l=k(l)),/^[a-zA-Z]:(\/|$)/.test(l)&&(l="/"+l),l}e.toPosixPath=B;function v(l,g=I.posix.sep){if(!l)return"";const U=l.length,q=l.charCodeAt(0);if(y(q)){if(y(l.charCodeAt(1))&&!y(l.charCodeAt(2))){let p=3;const K=p;for(;p<U&&!y(l.charCodeAt(p));p++);if(K!==p&&!y(l.charCodeAt(p+1))){for(p+=1;p<U;p++)if(y(l.charCodeAt(p)))return l.slice(0,p+1).replace(/[\\/]/g,g)}}return g}else if(u(q)&&l.charCodeAt(1)===58)return y(l.charCodeAt(2))?l.slice(0,2)+g:l.slice(0,2);let z=l.indexOf("://");if(z!==-1){for(z+=3;z<U;z++)if(y(l.charCodeAt(z)))return l.slice(0,z+1)}return""}e.getRoot=v;function w(l){if(!O.isWindows||!l||l.length<5)return!1;let g=l.charCodeAt(0);if(g!==92||(g=l.charCodeAt(1),g!==92))return!1;let U=2;const q=U;for(;U<l.length&&(g=l.charCodeAt(U),g!==92);U++);return!(q===U||(g=l.charCodeAt(U+1),isNaN(g)||g===92))}e.isUNC=w;const M=/[\\/:\*\?"<>\|]/g,N=/[\\/]/g,D=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function s(l,g=O.isWindows){const U=g?M:N;return!(!l||l.length===0||/^\s+$/.test(l)||(U.lastIndex=0,U.test(l))||g&&D.test(l)||l==="."||l===".."||g&&l[l.length-1]==="."||g&&l.length!==l.trim().length||l.length>255)}e.isValidBasename=s;function o(l,g,U){const q=l===g;return!U||q?q:!l||!g?!1:(0,A.equalsIgnoreCase)(l,g)}e.isEqual=o;function n(l,g,U,q=I.sep){if(l===g)return!0;if(!l||!g||g.length>l.length)return!1;if(U){if(!(0,A.startsWithIgnoreCase)(l,g))return!1;if(g.length===l.length)return!0;let p=g.length;return g.charAt(g.length-1)===q&&p--,l.charAt(p)===q}return g.charAt(g.length-1)!==q&&(g+=q),l.indexOf(g)===0}e.isEqualOrParent=n;function u(l){return l>=65&&l<=90||l>=97&&l<=122}e.isWindowsDriveLetter=u;function m(l,g){return O.isWindows&&l.endsWith(":")&&(l+=I.sep),(0,I.isAbsolute)(l)||(l=(0,I.join)(g,l)),l=(0,I.normalize)(l),O.isWindows?(l=(0,A.rtrim)(l,I.sep),l.endsWith(":")&&(l+=I.sep)):(l=(0,A.rtrim)(l,I.sep),l||(l=I.sep)),l}e.sanitizeFilePath=m;function c(l){const g=(0,I.normalize)(l);return O.isWindows?l.length>3?!1:F(g)&&(l.length===2||g.charCodeAt(2)===92):g===I.posix.sep}e.isRootOrDriveLetter=c;function F(l,g=O.isWindows){return g?u(l.charCodeAt(0))&&l.charCodeAt(1)===58:!1}e.hasDriveLetter=F;function Y(l){return F(l)?l[0]:void 0}e.getDriveLetter=Y;function C(l,g,U){return g.length>l.length?-1:l===g?0:(U&&(l=l.toLowerCase(),g=g.toLowerCase()),l.indexOf(g))}e.indexOfPath=C;function W(l){const g=l.split(":");let U,q,z;for(const p of g){const K=Number(p);(0,T.isNumber)(K)?q===void 0?q=K:z===void 0&&(z=K):U=U?[U,p].join(":"):p}if(!U)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:U,line:q!==void 0?q:void 0,column:z!==void 0?z:q!==void 0?1:void 0}}e.parseLineAndColumnAware=W;const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",G="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function X(l,g,U=8){let q="";for(let p=0;p<U;p++){let K;p===0&&O.isWindows&&!g&&(U===3||U===4)?K=G:K=L,q+=K.charAt(Math.floor(Math.random()*K.length))}let z;return g?z=`${g}-${q}`:z=q,l?(0,I.join)(l,z):z}e.randomPath=X}),define(ie[12],se([0,1,13,2,6]),function(x,e,I,O,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var T;(function(v){v.inMemory="inmemory",v.vscode="vscode",v.internal="private",v.walkThrough="walkThrough",v.walkThroughSnippet="walkThroughSnippet",v.http="http",v.https="https",v.file="file",v.mailto="mailto",v.untitled="untitled",v.data="data",v.command="command",v.vscodeRemote="vscode-remote",v.vscodeRemoteResource="vscode-remote-resource",v.vscodeUserData="vscode-userdata",v.vscodeCustomEditor="vscode-custom-editor",v.vscodeNotebookCell="vscode-notebook-cell",v.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",v.vscodeNotebookCellOutput="vscode-notebook-cell-output",v.vscodeInteractive="vscode-interactive",v.vscodeInteractiveInput="vscode-interactive-input",v.vscodeSettings="vscode-settings",v.vscodeWorkspaceTrust="vscode-workspace-trust",v.vscodeTerminal="vscode-terminal",v.vscodeInteractiveSesssion="vscode-chat-editor",v.webviewPanel="webview-panel",v.vscodeWebview="vscode-webview",v.extension="extension",v.vscodeFileResource="vscode-file",v.tmp="tmp",v.vsls="vsls",v.vscodeSourceControl="vscode-scm"})(T||(e.Schemas=T={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class y{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${T.vscodeRemoteResource}`}setPreferredWebSchema(w){this.d=w}setDelegate(w){this.e=w}setServerRootPath(w){this.f=`${w}/${T.vscodeRemoteResource}`}set(w,M,N){this.a[w]=M,this.b[w]=N}setConnectionToken(w,M){this.c[w]=M}getPreferredWebSchema(){return this.d}rewrite(w){if(this.e)try{return this.e(w)}catch(n){return I.onUnexpectedError(n),w}const M=w.authority;let N=this.a[M];N&&N.indexOf(":")!==-1&&N.indexOf("[")===-1&&(N=`[${N}]`);const D=this.b[M],s=this.c[M];let o=`path=${encodeURIComponent(w.path)}`;return typeof s=="string"&&(o+=`&${e.connectionTokenQueryName}=${encodeURIComponent(s)}`),A.URI.from({scheme:O.isWeb?this.d:T.vscodeRemoteResource,authority:`${N}:${D}`,path:this.f,query:o})}}e.RemoteAuthorities=new y,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class k{asBrowserUri(w){const M=this.b(w,x);return this.uriToBrowserUri(M)}uriToBrowserUri(w){return w.scheme===T.vscodeRemote?e.RemoteAuthorities.rewrite(w):w.scheme===T.file&&(O.isNative||O.isWebWorker&&O.globals.origin===`${T.vscodeFileResource}://${k.a}`)?w.with({scheme:T.vscodeFileResource,authority:w.authority||k.a,query:null,fragment:null}):w}asFileUri(w){const M=this.b(w,x);return this.uriToFileUri(M)}uriToFileUri(w){return w.scheme===T.vscodeFileResource?w.with({scheme:T.file,authority:w.authority!==k.a?w.authority:null,query:null,fragment:null}):w}b(w,M){return A.URI.isUri(w)?w:A.URI.parse(M.toUrl(w))}}k.a="vscode-app",e.FileAccess=new k;var B;(function(v){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);v.CoopAndCoep=Object.freeze(w.get("3"));const M="vscode-coi";function N(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:A.URI.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const n=o?.get(M);if(n)return w.get(n)}v.getHeadersFromQuery=N;function D(s,o,n){if(!globalThis.crossOriginIsolated)return;const u=o&&n?"3":n?"2":"1";s instanceof URLSearchParams?s.set(M,u):s[M]=u}v.addSearchParam=D})(B||(e.COI=B={}))}),define(ie[7],se([0,1,5,12,3,2,4,6]),function(x,e,I,O,A,T,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function B(D){return(0,k.uriToFsPath)(D,!0)}e.originalFSPath=B;class v{constructor(s){this.a=s}compare(s,o,n=!1){return s===o?0:(0,y.compare)(this.getComparisonKey(s,n),this.getComparisonKey(o,n))}isEqual(s,o,n=!1){return s===o?!0:!s||!o?!1:this.getComparisonKey(s,n)===this.getComparisonKey(o,n)}getComparisonKey(s,o=!1){return s.with({path:this.a(s)?s.path.toLowerCase():void 0,fragment:o?null:void 0}).toString()}ignorePathCasing(s){return this.a(s)}isEqualOrParent(s,o,n=!1){if(s.scheme===o.scheme){if(s.scheme===O.Schemas.file)return I.isEqualOrParent(B(s),B(o),this.a(s))&&s.query===o.query&&(n||s.fragment===o.fragment);if((0,e.isEqualAuthority)(s.authority,o.authority))return I.isEqualOrParent(s.path,o.path,this.a(s),"/")&&s.query===o.query&&(n||s.fragment===o.fragment)}return!1}joinPath(s,...o){return k.URI.joinPath(s,...o)}basenameOrAuthority(s){return(0,e.basename)(s)||s.authority}basename(s){return A.posix.basename(s.path)}extname(s){return A.posix.extname(s.path)}dirname(s){if(s.path.length===0)return s;let o;return s.scheme===O.Schemas.file?o=k.URI.file(A.dirname(B(s))).path:(o=A.posix.dirname(s.path),s.authority&&o.length&&o.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),o="/")),s.with({path:o})}normalizePath(s){if(!s.path.length)return s;let o;return s.scheme===O.Schemas.file?o=k.URI.file(A.normalize(B(s))).path:o=A.posix.normalize(s.path),s.with({path:o})}relativePath(s,o){if(s.scheme!==o.scheme||!(0,e.isEqualAuthority)(s.authority,o.authority))return;if(s.scheme===O.Schemas.file){const m=A.relative(B(s),B(o));return T.isWindows?I.toSlashes(m):m}let n=s.path||"/";const u=o.path||"/";if(this.a(s)){let m=0;for(const c=Math.min(n.length,u.length);m<c&&!(n.charCodeAt(m)!==u.charCodeAt(m)&&n.charAt(m).toLowerCase()!==u.charAt(m).toLowerCase());m++);n=u.substr(0,m)+n.substr(m)}return A.posix.relative(n,u)}resolvePath(s,o){if(s.scheme===O.Schemas.file){const n=k.URI.file(A.resolve(B(s),o));return s.with({authority:n.authority,path:n.path})}return o=I.toPosixPath(o),s.with({path:A.posix.resolve(s.path,o)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,o){return s===o||s!==void 0&&o!==void 0&&(0,y.equalsIgnoreCase)(s,o)}hasTrailingPathSeparator(s,o=A.sep){if(s.scheme===O.Schemas.file){const n=B(s);return n.length>I.getRoot(n).length&&n[n.length-1]===o}else{const n=s.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,o=A.sep){return(0,e.hasTrailingPathSeparator)(s,o)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,o=A.sep){let n=!1;if(s.scheme===O.Schemas.file){const u=B(s);n=u!==void 0&&u.length===I.getRoot(u).length&&u[u.length-1]===o}else{o="/";const u=s.path;n=u.length===1&&u.charCodeAt(u.length-1)===47}return!n&&!(0,e.hasTrailingPathSeparator)(s,o)?s.with({path:s.path+"/"}):s}}e.ExtUri=v,e.extUri=new v(()=>!1),e.extUriBiasedIgnorePathCase=new v(D=>D.scheme===O.Schemas.file?!T.isLinux:!0),e.extUriIgnorePathCase=new v(D=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function w(D,s){const o=[];for(let n=0;n<D.length;n++){const u=s(D[n]);D.some((m,c)=>c===n?!1:(0,e.isEqualOrParent)(u,s(m)))||o.push(D[n])}return o}e.distinctParents=w;var M;(function(D){D.META_DATA_LABEL="label",D.META_DATA_DESCRIPTION="description",D.META_DATA_SIZE="size",D.META_DATA_MIME="mime";function s(o){const n=new Map;o.path.substring(o.path.indexOf(";")+1,o.path.lastIndexOf(";")).split(";").forEach(c=>{const[F,Y]=c.split(":");F&&Y&&n.set(F,Y)});const m=o.path.substring(0,o.path.indexOf(";"));return m&&n.set(D.META_DATA_MIME,m),n}D.parseMetaData=s})(M||(e.DataUri=M={}));function N(D,s,o){if(s){let n=D.path;return n&&n[0]!==A.posix.sep&&(n=A.posix.sep+n),D.with({scheme:o,authority:s,path:n})}return D.with({scheme:o})}e.toLocalResource=N}),define(ie[8],se([0,1,14,13,18,19,7,2,11]),function(x,e,I,O,A,T,y,k,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function v(r){return!!r&&typeof r.then=="function"}e.isThenable=v;function w(r){const t=new I.CancellationTokenSource,i=r(t.token),a=new Promise((h,R)=>{const Q=t.token.onCancellationRequested(()=>{Q.dispose(),t.dispose(),R(new O.CancellationError)});Promise.resolve(i).then(V=>{Q.dispose(),t.dispose(),h(V)},V=>{Q.dispose(),t.dispose(),R(V)})});return new class{cancel(){t.cancel()}then(h,R){return a.then(h,R)}catch(h){return this.then(void 0,h)}finally(h){return a.finally(h)}}}e.createCancelablePromise=w;function M(r,t,i){return new Promise((a,h)=>{const R=t.onCancellationRequested(()=>{R.dispose(),a(i)});r.then(a,h).finally(()=>R.dispose())})}e.raceCancellation=M;function N(r,t){return new Promise((i,a)=>{const h=t.onCancellationRequested(()=>{h.dispose(),a(new O.CancellationError)});r.then(i,a).finally(()=>h.dispose())})}e.raceCancellationError=N;async function D(r){let t=-1;const i=r.map((a,h)=>a.then(R=>(t=h,R)));try{return await Promise.race(i)}finally{r.forEach((a,h)=>{h!==t&&a.cancel()})}}e.raceCancellablePromises=D;function s(r,t,i){let a;const h=setTimeout(()=>{a?.(void 0),i?.()},t);return Promise.race([r.finally(()=>clearTimeout(h)),new Promise(R=>a=R)])}e.raceTimeout=s;function o(r){return new Promise((t,i)=>{const a=r();v(a)?a.then(t,i):t(a)})}e.asPromise=o;class n{constructor(){this.a=null,this.b=null,this.d=null}queue(t){if(this.a){if(this.d=t,!this.b){const i=()=>{this.b=null;const a=this.queue(this.d);return this.d=null,a};this.b=new Promise(a=>{this.a.then(i,i).then(a)})}return new Promise((i,a)=>{this.b.then(i,a)})}return this.a=t(),new Promise((i,a)=>{this.a.then(h=>{this.a=null,i(h)},h=>{this.a=null,a(h)})})}}e.Throttler=n;class u{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.Sequencer=u;class m{constructor(){this.a=new Map}queue(t,i){const h=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===h&&this.a.delete(t)});return this.a.set(t,h),h}}e.SequencerByKey=m;const c=(r,t)=>{let i=!0;const a=setTimeout(()=>{i=!1,t()},r);return{isTriggered:()=>i,dispose:()=>{clearTimeout(a),i=!1}}},F=r=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,r())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class Y{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((h,R)=>{this.d=h,this.f=R}).then(()=>{if(this.b=null,this.d=null,this.g){const h=this.g;return this.g=null,h()}}));const a=()=>{this.a=null,this.d?.(null)};return this.a=i===B.MicrotaskDelay?F(a):c(i,a),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new O.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=Y;class C{constructor(t){this.a=new Y(t),this.b=new n}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=C;class W{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=W;class L extends W{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=L;function G(r,t){return t?new Promise((i,a)=>{const h=setTimeout(()=>{R.dispose(),i()},r),R=t.onCancellationRequested(()=>{clearTimeout(h),R.dispose(),a(new O.CancellationError)})}):w(i=>G(r,i))}e.timeout=G;function X(r,t=0){const i=setTimeout(r,t);return(0,T.toDisposable)(()=>clearTimeout(i))}e.disposableTimeout=X;function l(r){const t=[];let i=0;const a=r.length;function h(){return i<a?r[i++]():null}function R(Q){Q!=null&&t.push(Q);const V=h();return V?V.then(R):Promise.resolve(t)}return Promise.resolve(null).then(R)}e.sequence=l;function g(r,t=a=>!!a,i=null){let a=0;const h=r.length,R=()=>{if(a>=h)return Promise.resolve(i);const Q=r[a++];return Promise.resolve(Q()).then(J=>t(J)?Promise.resolve(J):R())};return R()}e.first=g;function U(r,t=a=>!!a,i=null){if(r.length===0)return Promise.resolve(i);let a=r.length;const h=()=>{a=-1;for(const R of r)R.cancel?.()};return new Promise((R,Q)=>{for(const V of r)V.then(J=>{--a>=0&&t(J)?(h(),R(J)):a===0&&R(i)}).catch(J=>{--a>=0&&(h(),Q(J))})})}e.firstParallel=U;class q{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new A.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((i,a)=>{this.f.push({factory:t,c:i,e:a}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=q;class z extends q{constructor(){super(1)}}e.Queue=z;class p{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const t=new b;return this.b.add(t),t.p}d(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,i=y.extUri){const a=i.getComparisonKey(t);let h=this.a.get(a);return h||(h=new z,A.Event.once(h.onDrained)(()=>{h?.dispose(),this.a.delete(a),this.f()}),this.a.set(a,h)),h}f(){this.d()&&this.g()}g(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.g()}}e.ResourceQueue=p;class K{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.TimeoutTimer=K;class ne{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setInterval(()=>{t()},i)}}e.IntervalTimer=ne;class _{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=_;class ee{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=ee;class re extends _{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=re;class $ extends T.Disposable{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new T.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new _(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=$,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=r=>{(0,k.setTimeout0)(()=>{if(t)return;const i=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(r,t)=>{const i=requestIdleCallback(r,typeof t=="number"?{timeout:t}:void 0);let a=!1;return{dispose(){a||(a=!0,cancelIdleCallback(i))}}}}();class Z{constructor(t){this.d=!1,this.a=()=>{try{this.f=t()}catch(i){this.g=i}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=Z;async function H(r,t,i){let a;for(let h=0;h<i;h++)try{return await r()}catch(R){a=R,await G(t)}throw a}e.retry=H;class te{hasPending(t){return this.a?typeof t=="number"?this.a.taskId===t:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(t,i,a){return this.a={taskId:t,cancel:()=>a?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this.b)this.b.run=t;else{let i,a;const h=new Promise((R,Q)=>{i=R,a=Q});this.b={run:t,promise:h,promiseResolve:i,promiseReject:a}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=te;class d{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.IntervalCounter=d;class b{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.f=!0,i()})}error(t){return new Promise(i=>{this.b(t),this.d=!0,i()})}cancel(){new Promise(t=>{this.b(new O.CancellationError),this.d=!0,t()})}}e.DeferredPromise=b;var f;(function(r){async function t(a){let h;const R=await Promise.all(a.map(Q=>Q.then(V=>V,V=>{h||(h=V)})));if(typeof h<"u")throw h;return R}r.settled=t;function i(a){return new Promise(async(h,R)=>{try{await a(h,R)}catch(Q){R(Q)}})}r.withAsyncBody=i})(f||(e.Promises=f={}));var E;(function(r){r[r.Initial=0]="Initial",r[r.DoneOK=1]="DoneOK",r[r.DoneError=2]="DoneError"})(E||(E={}));class P{static fromArray(t){return new P(i=>{i.emitMany(t)})}static fromPromise(t){return new P(async i=>{i.emitMany(await t)})}static fromPromises(t){return new P(async i=>{await Promise.all(t.map(async a=>i.emitOne(await a)))})}static merge(t){return new P(async i=>{await Promise.all(t.map(async a=>{for await(const h of a)i.emitOne(h)}))})}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new A.Emitter,queueMicrotask(async()=>{const i={emitOne:a=>this.g(a),emitMany:a=>this.h(a),reject:a=>this.k(a)};try{await Promise.resolve(t(i)),this.j()}catch(a){this.k(a)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await A.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new P(async a=>{for await(const h of t)a.emitOne(i(h))})}map(t){return P.map(this,t)}static filter(t,i){return new P(async a=>{for await(const h of t)i(h)&&a.emitOne(h)})}filter(t){return P.filter(this,t)}static coalesce(t){return P.filter(t,i=>!!i)}coalesce(){return P.coalesce(this)}static async toPromise(t){const i=[];for await(const a of t)i.push(a);return i}toPromise(){return P.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.AsyncIterableObject=P,P.EMPTY=P.fromArray([]);class S extends P{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=S;function j(r){const t=new I.CancellationTokenSource,i=r(t.token);return new S(t,async a=>{const h=t.token.onCancellationRequested(()=>{h.dispose(),t.dispose(),a.reject(new O.CancellationError)});try{for await(const R of i){if(t.token.isCancellationRequested)return;a.emitOne(R)}h.dispose(),t.dispose()}catch(R){h.dispose(),t.dispose(),a.reject(R)}})}e.createCancelableAsyncIterable=j}),define(ie[9],se([0,1,20,8,5,10,3,2,4]),function(x,e,I,O,A,T,y,k,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function v(){return Object.create(null)}e.getEmptyExpression=v,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const w="[/\\\\]",M="[^/\\\\]",N=/\//g;function D(d,b){switch(d){case 0:return"";case 1:return`${M}*?`;default:return`(?:${w}|${M}+${w}${b?`|${w}${M}+`:""})*?`}}function s(d,b){if(!d)return[];const f=[];let E=!1,P=!1,S="";for(const j of d){switch(j){case b:if(!E&&!P){f.push(S),S="";continue}break;case"{":E=!0;break;case"}":E=!1;break;case"[":P=!0;break;case"]":P=!1;break}S+=j}return S&&f.push(S),f}e.splitGlobAware=s;function o(d){if(!d)return"";let b="";const f=s(d,e.GLOB_SPLIT);if(f.every(E=>E===e.GLOBSTAR))b=".*";else{let E=!1;f.forEach((P,S)=>{if(P===e.GLOBSTAR){if(E)return;b+=D(2,S===f.length-1)}else{let j=!1,r="",t=!1,i="";for(const a of P){if(a!=="}"&&j){r+=a;continue}if(t&&(a!=="]"||!i)){let h;a==="-"?h=a:(a==="^"||a==="!")&&!i?h="^":a===e.GLOB_SPLIT?h="":h=(0,B.escapeRegExpCharacters)(a),i+=h;continue}switch(a){case"{":j=!0;continue;case"[":t=!0;continue;case"}":{const R=`(?:${s(r,",").map(Q=>o(Q)).join("|")})`;b+=R,j=!1,r="";break}case"]":{b+="["+i+"]",t=!1,i="";break}case"?":b+=M;continue;case"*":b+=D(1);continue;default:b+=(0,B.escapeRegExpCharacters)(a)}}S<f.length-1&&(f[S+1]!==e.GLOBSTAR||S+2<f.length)&&(b+=w)}E=P===e.GLOBSTAR})}return b}const n=/^\*\*\/\*\.[\w\.-]+$/,u=/^\*\*\/([\w\.-]+)\/?$/,m=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,c=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,F=/^\*\*((\/[\w\.-]+)+)\/?$/,Y=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,C=new T.LRUCache(1e4),W=function(){return!1},L=function(){return null};function G(d,b){if(!d)return L;let f;typeof d!="string"?f=d.pattern:f=d,f=f.trim();const E=`${f}_${!!b.trimForExclusions}`;let P=C.get(E);if(P)return X(P,d);let S;return n.test(f)?P=g(f.substr(4),f):(S=u.exec(l(f,b)))?P=U(S[1],f):(b.trimForExclusions?c:m).test(f)?P=q(f,b):(S=F.exec(l(f,b)))?P=z(S[1].substr(1),f,!0):(S=Y.exec(l(f,b)))?P=z(S[1],f,!1):P=p(f),C.set(E,P),X(P,d)}function X(d,b){if(typeof b=="string")return d;const f=function(E,P){return(0,A.isEqualOrParent)(E,b.base,!k.isLinux)?d((0,B.ltrim)(E.substr(b.base.length),y.sep),P):null};return f.allBasenames=d.allBasenames,f.allPaths=d.allPaths,f.basenames=d.basenames,f.patterns=d.patterns,f}function l(d,b){return b.trimForExclusions&&d.endsWith("/**")?d.substr(0,d.length-2):d}function g(d,b){return function(f,E){return typeof f=="string"&&f.endsWith(d)?b:null}}function U(d,b){const f=`/${d}`,E=`\\${d}`,P=function(j,r){return typeof j!="string"?null:r?r===d?b:null:j===d||j.endsWith(f)||j.endsWith(E)?b:null},S=[d];return P.basenames=S,P.patterns=[b],P.allBasenames=S,P}function q(d,b){const f=H(d.slice(1,-1).split(",").map(r=>G(r,b)).filter(r=>r!==L),d),E=f.length;if(!E)return L;if(E===1)return f[0];const P=function(r,t){for(let i=0,a=f.length;i<a;i++)if(f[i](r,t))return d;return null},S=f.find(r=>!!r.allBasenames);S&&(P.allBasenames=S.allBasenames);const j=f.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return j.length&&(P.allPaths=j),P}function z(d,b,f){const E=y.sep===y.posix.sep,P=E?d:d.replace(N,y.sep),S=y.sep+P,j=y.posix.sep+d;let r;return f?r=function(t,i){return typeof t=="string"&&(t===P||t.endsWith(S)||!E&&(t===d||t.endsWith(j)))?b:null}:r=function(t,i){return typeof t=="string"&&(t===P||!E&&t===d)?b:null},r.allPaths=[(f?"*/":"./")+d],r}function p(d){try{const b=new RegExp(`^${o(d)}$`);return function(f){return b.lastIndex=0,typeof f=="string"&&b.test(f)?d:null}}catch{return L}}function K(d,b,f){return!d||typeof b!="string"?!1:ne(d)(b,void 0,f)}e.match=K;function ne(d,b={}){if(!d)return W;if(typeof d=="string"||_(d)){const f=G(d,b);if(f===L)return W;const E=function(P,S){return!!f(P,S)};return f.allBasenames&&(E.allBasenames=f.allBasenames),f.allPaths&&(E.allPaths=f.allPaths),E}return $(d,b)}e.parse=ne;function _(d){const b=d;return b?typeof b.base=="string"&&typeof b.pattern=="string":!1}e.isRelativePattern=_;function ee(d){return d.allBasenames||[]}e.getBasenameTerms=ee;function re(d){return d.allPaths||[]}e.getPathTerms=re;function $(d,b){const f=H(Object.getOwnPropertyNames(d).map(r=>Z(r,d[r],b)).filter(r=>r!==L)),E=f.length;if(!E)return L;if(!f.some(r=>!!r.requiresSiblings)){if(E===1)return f[0];const r=function(a,h){let R;for(let Q=0,V=f.length;Q<V;Q++){const J=f[Q](a,h);if(typeof J=="string")return J;(0,O.isThenable)(J)&&(R||(R=[]),R.push(J))}return R?(async()=>{for(const Q of R){const V=await Q;if(typeof V=="string")return V}return null})():null},t=f.find(a=>!!a.allBasenames);t&&(r.allBasenames=t.allBasenames);const i=f.reduce((a,h)=>h.allPaths?a.concat(h.allPaths):a,[]);return i.length&&(r.allPaths=i),r}const P=function(r,t,i){let a,h;for(let R=0,Q=f.length;R<Q;R++){const V=f[R];V.requiresSiblings&&i&&(t||(t=(0,y.basename)(r)),a||(a=t.substr(0,t.length-(0,y.extname)(r).length)));const J=V(r,t,a,i);if(typeof J=="string")return J;(0,O.isThenable)(J)&&(h||(h=[]),h.push(J))}return h?(async()=>{for(const R of h){const Q=await R;if(typeof Q=="string")return Q}return null})():null},S=f.find(r=>!!r.allBasenames);S&&(P.allBasenames=S.allBasenames);const j=f.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return j.length&&(P.allPaths=j),P}function Z(d,b,f){if(b===!1)return L;const E=G(d,f);if(E===L)return L;if(typeof b=="boolean")return E;if(b){const P=b.when;if(typeof P=="string"){const S=(j,r,t,i)=>{if(!i||!E(j,r))return null;const a=P.replace("$(basename)",()=>t),h=i(a);return(0,O.isThenable)(h)?h.then(R=>R?d:null):h?d:null};return S.requiresSiblings=!0,S}}return E}function H(d,b){const f=d.filter(r=>!!r.basenames);if(f.length<2)return d;const E=f.reduce((r,t)=>{const i=t.basenames;return i?r.concat(i):r},[]);let P;if(b){P=[];for(let r=0,t=E.length;r<t;r++)P.push(b)}else P=f.reduce((r,t)=>{const i=t.patterns;return i?r.concat(i):r},[]);const S=function(r,t){if(typeof r!="string")return null;if(!t){let a;for(a=r.length;a>0;a--){const h=r.charCodeAt(a-1);if(h===47||h===92)break}t=r.substr(a)}const i=E.indexOf(t);return i!==-1?P[i]:null};S.basenames=E,S.patterns=P,S.allBasenames=E;const j=d.filter(r=>!r.basenames);return j.push(S),j}function te(d,b){return(0,I.equals)(d,b,(f,E)=>typeof f=="string"&&typeof E=="string"?f===E:typeof f!="string"&&typeof E!="string"?f.base===E.base&&f.pattern===E.pattern:!1)}e.patternsEquals=te}),define(ie[15],se([0,1,21]),function(x,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const O=(A,T,y)=>{let k;if(A[0]===255&&A[1]===254)k=new TextDecoder("utf-16le").decode(A);else if(A[0]===254&&A[1]===255)k=new TextDecoder("utf-16be").decode(A);else if(k=new TextDecoder("utf8").decode(A),k.slice(0,1e3).includes("\uFFFD")&&A.includes(0))return[];const B=[],v=[];let w=null,M=y.remainingResultQuota;for(;M>=0&&(w=T.exec(k));)v.push({matchStartIndex:w.index,matchedText:w[0]}),M--;if(v.length){const N=new Set,D=new Set,s=[],o=F=>k.slice(s[F].start,s[F].end);let n=0,u=null;const m=/\r?\n/g;for(;u=m.exec(k);)s.push({start:n,end:u.index}),n=u.index+u[0].length;n<k.length&&s.push({start:n,end:k.length});let c=0;for(const{matchStartIndex:F,matchedText:Y}of v){if(M<0)break;for(;s[c+1]&&F>s[c].end;)c++;let C=c;for(;s[C+1]&&F+Y.length>s[C].end;)C++;if(y.beforeContext)for(let g=Math.max(0,c-y.beforeContext);g<c;g++)N.add(g);let W="",L=0;for(let g=c;g<=C;g++){let U=o(g);y.previewOptions?.charsPerLine&&U.length>y.previewOptions.charsPerLine&&(L=Math.max(F-s[c].start-20,0),U=U.substr(L,y.previewOptions.charsPerLine)),W+=`${U}
`,D.add(g)}const G=new I.Range(c,F-s[c].start,C,F+Y.length-s[C].start),X=new I.Range(0,F-s[c].start-L,C-c,F+Y.length-s[C].start-(C===c?L:0)),l={ranges:G,preview:{text:W,matches:X}};if(B.push(l),y.afterContext)for(let g=C+1;g<=Math.min(C+y.afterContext,s.length-1);g++)N.add(g)}for(const F of N)D.has(F)||B.push({text:o(F),lineNumber:F+1})}return B};e.getFileResults=O}),define(ie[16],se([0,1,9]),function(x,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class O{constructor(T,y,k){if(this.b=y,this.c=k,y[y.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");y[y.length-1]!=="/"&&(y+="/"),this.a=this.e(T,this.b,this.c)}updateContents(T){this.a=this.e(T,this.b,this.c)}isPathIncludedInTraversal(T,y){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);return!this.a(T,y)}isArbitraryPathIgnored(T,y){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);const k=T.split("/").filter(w=>w);let B=!1,v="";for(let w=0;w<k.length;w++){const M=w===k.length-1,N=k[w];if(v=v+"/"+N,!this.isPathIncludedInTraversal(v,M?y:!0)){B=!0;break}}return B}d(T,y,k){const B=T.map(w=>this.f(w,y)),v=Object.create(null);for(const w of B)v[w]=!0;return I.parse(v,{trimForExclusions:k})}e(T,y,k){const B=T.split(`
`).map(c=>c.trim()).filter(c=>c&&c[0]!=="#"),v=B.filter(c=>!c.endsWith("/")),w=v.filter(c=>!c.includes("!")),M=this.d(w,y,!0),N=v.filter(c=>c.includes("!")).map(c=>c.replace(/!/g,"")),D=this.d(N,y,!1),s=B.filter(c=>!c.includes("!")),o=this.d(s,y,!0),n=B.filter(c=>c.includes("!")).map(c=>c.replace(/!/g,"")),u=this.d(n,y,!1);return(c,F)=>c.startsWith(y)?F&&o(c)&&!u(c)||M(c)&&!D(c)?!0:k?k.a(c,F):!1:!1}f(T,y){const k=T.indexOf("/");return k===-1||k===T.length-1?T="**/"+T:(k===0?y.slice(-1)==="/"&&(T=T.slice(1)):y.slice(-1)!=="/"&&(T="/"+T),T=y+T),T}}e.IgnoreFile=O}),define(ie[22],se([0,1,9,6,3,14,15,16,4,8,7]),function(x,e,I,O,A,T,y,k,B,v,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const M=!1,N=+new Date,D={},s=async(C,W)=>{if(!M)return W();const L=Date.now(),G=(D[C]??0)+1;console.info(C,G,"starting",Math.round((L-N)*10)/1e4),D[C]=G;const X=await W(),l=Date.now();return console.info(C,G,"took",l-L),X};function o(C){return new n(C)}e.create=o;class n{constructor(W){this.d=W,this.cancellationTokens=new Map}cancelQuery(W){this.cancellationTokens.get(W)?.cancel()}g(W){const L=new T.CancellationTokenSource;return this.cancellationTokens.set(W,L),L}async listDirectory(W,L,G,X,l){const g=m(G),U=new w.ExtUri(()=>X),q=this.g(l),z=[];let p=!1,K=0;const ne=L.maxResults||512,_=L.filePattern?ee=>L.filePattern.split("").every(re=>ee.includes(re)):ee=>!0;return await s("listDirectory",()=>this.h(W,c(L),g,U,ee=>{if(_(ee.name))return K++,ne&&K>ne&&(p=!0,q.cancel()),z.push(ee.path)},q.token)),{results:z,limitHit:p}}async searchDirectory(W,L,G,X,l){const g=m(G),U=new w.ExtUri(()=>X);return s("searchInFiles",async()=>{const q=this.g(l),z=[],p=u(L.contentPattern),K=[];let ne=0,_=0;const ee=!1,re=async $=>{if(q.token.isCancellationRequested)return;ne++;const Z=await $.resolve();if(q.token.isCancellationRequested)return;const H=new Uint8Array(Z),te=(0,y.getFileResults)(H,p,{afterContext:L.afterContext??0,beforeContext:L.beforeContext??0,previewOptions:L.previewOptions,remainingResultQuota:L.maxResults?L.maxResults-_:1e4});if(te.length){_+=te.length,L.maxResults&&_>L.maxResults&&q.cancel();const d={resource:O.URI.joinPath(g.folder,$.path),results:te};this.d.sendTextSearchMatch(d,l),z.push(d)}};return await s("walkFolderToResolve",()=>this.h(W,c(L),g,U,async $=>K.push(re($)),q.token)),await s("resolveOngoingProcesses",()=>Promise.all(K)),M&&console.log("Searched in",ne,"files"),{results:z,limitHit:ee}})}async h(W,L,G,X,l,g){const U=I.parse(G.excludePattern??{},{trimForExclusions:!0}),q=($,Z,H)=>($=$.slice(1),!!(U($,Z,H)||F(L,$))),z=($,Z,H)=>($=$.slice(1),!(U($,Z,H)||!Y(L,$,X))),p=($,Z)=>({type:"file",name:$.name,path:Z,resolve:()=>$.getFile().then(te=>te.arrayBuffer())}),K=$=>$.kind==="directory",ne=$=>$.kind==="file",_=async($,Z,H)=>{if(!G.disregardIgnoreFiles){const d=await Promise.all([$.getFileHandle(".gitignore").catch(b=>{}),$.getFileHandle(".ignore").catch(b=>{})]);await Promise.all(d.map(async b=>{if(!b)return;const f=new TextDecoder("utf8").decode(new Uint8Array(await(await b.getFile()).arrayBuffer()));H=new k.IgnoreFile(f,Z,H)}))}const te=v.Promises.withAsyncBody(async d=>{const b=[],f=[],E=[],P=new Set;for await(const S of $.entries())E.push(S),P.add(S[0]);for(const[S,j]of E){if(g.isCancellationRequested)break;const r=Z+S;if(H&&!H.isPathIncludedInTraversal(r,j.kind==="directory"))continue;const t=i=>P.has(i);K(j)&&!q(r,S,t)?f.push(_(j,r+"/",H)):ne(j)&&z(r,S,t)&&b.push(p(j,r))}d([...await Promise.all(f),...b])});return{type:"dir",name:$.name,entries:te}},ee=async($,Z)=>{g.isCancellationRequested||await Promise.all((await $.entries).sort((H,te)=>-(H.type==="dir"?0:1)+(te.type==="dir"?0:1)).map(async H=>H.type==="dir"?ee(H,Z):Z(H)))},re=await s("process",()=>_(W,"/"));await s("resolve",()=>ee(re,l))}}e.LocalFileSearchSimpleWorker=n;function u(C){return(0,B.createRegExp)(C.pattern,!!C.isRegExp,{wholeWord:C.isWordMatch,global:!0,matchCase:C.isCaseSensitive,multiline:!0,unicode:!0})}function m(C){return{...C,folder:O.URI.revive(C.folder)}}function c(C){return{...C,extraFileResources:C.extraFileResources?.map(W=>O.URI.revive(W)),folderQueries:C.folderQueries.map(W=>m(W))}}function F(C,W){return!!(C.excludePattern&&I.match(C.excludePattern,W))}function Y(C,W,L){return C.excludePattern&&I.match(C.excludePattern,W)?!1:C.includePattern||C.usingSearchPaths?C.includePattern&&I.match(C.includePattern,W)?!0:C.usingSearchPaths?!!C.folderQueries&&C.folderQueries.some(G=>{const X=G.folder,l=O.URI.file(W);if(L.isEqualOrParent(l,X)){const g=A.relative(X.path,l.path);return!G.includePattern||!!I.match(G.includePattern,g)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/6a995c4f4cc2ced6e3237749973982e751cb0bf9/core/vs/workbench/services/search/worker/localFileSearch.js.map
